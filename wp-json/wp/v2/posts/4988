{"id":4988,"date":"2021-01-19T00:24:54","date_gmt":"2021-01-18T18:54:54","guid":{"rendered":"https:\/\/golangbyexamples.com\/?p=4988"},"modified":"2021-01-19T00:25:02","modified_gmt":"2021-01-18T18:55:02","slug":"multipart-form-data-content-type-golang","status":"publish","type":"post","link":"https:\/\/golangbyexamples.com\/multipart-form-data-content-type-golang\/","title":{"rendered":"HTTP- Understanding multipart\/form-data content-type"},"content":{"rendered":"\n<p class=\"has-medium-font-size\">In HTTP context, the <strong>multipart\/form-data<\/strong> content-type is used for submitting HTML form. In the case of <strong>multipart\/form-data<\/strong>, as the name suggests the body consists of different parts separated by a delimiter or boundary where each part is described by its own headers. The delimiter or boundary is also sent as part of the header only.<\/p>\n\n\n\n<p class=\"has-medium-font-size\">When you sending an HTML form through a browser in an HTTP call, the data contents can be sent in as request body below two formats.<\/p>\n\n\n\n<ul class=\"has-medium-font-size wp-block-list\"><li>application\/x-www-form-urlencoded<\/li><\/ul>\n\n\n\n<ul class=\"has-medium-font-size wp-block-list\"><li>multipart\/form-data<\/li><\/ul>\n\n\n\n<p class=\"has-medium-font-size\">For most of the cases, <strong>application\/x-www-form-urlencoded<\/strong> can be used. <strong>application\/x-www-form-urlencoded <\/strong>is not much efficient for<\/p>\n\n\n\n<ul class=\"has-medium-font-size wp-block-list\"><li>Sending Files or images<\/li><\/ul>\n\n\n\n<ul class=\"has-medium-font-size wp-block-list\"><li>Sending large quantities\u00a0of binary data or text which contains non-ASCII characters<\/li><\/ul>\n\n\n\n<p class=\"has-medium-font-size\">For example, let&#8217;s say that the below data needs to be sent.<\/p>\n\n\n\n<ul class=\"has-medium-font-size wp-block-list\"><li>Name<\/li><li>Age<\/li><\/ul>\n\n\n\n<p class=\"has-medium-font-size\">Then <strong>application\/x-www-form-urlencoded <\/strong>can be used to send the above data. But let&#8217;s say that you also need to send the profile photo of the user in the request as well. So the data is now as below<\/p>\n\n\n\n<ul class=\"has-medium-font-size wp-block-list\"><li>Name<\/li><li>Age<\/li><li>Photo<\/li><\/ul>\n\n\n\n<p class=\"has-medium-font-size\">In the above case, it will not be efficient to use <strong>application\/x-www-form-urlencoded <\/strong>content-type. <strong>multipart\/form-data<\/strong> should be used in this case. So for sending simple form data use <strong>application\/x-www-form-urlencoded <\/strong>but if the form-data also needs to send binary data then use <strong>multipart\/form-data<\/strong><\/p>\n\n\n\n<p class=\"has-medium-font-size\">Why is that?.\u00a0 We will answer this question once we have understood the format of <strong>application\/x-www-form-urlencoded <\/strong>and <strong>multipart\/form-data.\u00a0<\/strong><\/p>\n\n\n\n<p class=\"has-medium-font-size\"><strong>application\/x-www-form-urlencoded <\/strong>encodes each non-ASCII byte to 3 bytes. Basically <strong>applcation\/x-www-form-urlencoded<\/strong> content-type request body is like a giant query string. Similar to the query string in a URI it is a key-value pair having the below format<\/p>\n\n\n\n<pre class=\"wp-block-prismatic-blocks\"><code class=\"language-go\">key1=value1&key2=value21&key2=value22&key3=value3<\/code><\/pre>\n\n\n\n<p class=\"has-medium-font-size\">While sending <strong>application\/x-www-form-urlencoded<\/strong>, all the non-alphanumeric characters are URL encoded. All the non-alphanumeric character(reserved only) will be URL encoded in the below format<\/p>\n\n\n\n<pre class=\"wp-block-prismatic-blocks\"><code class=\"language-go\">%WW<\/code><\/pre>\n\n\n\n<p class=\"has-medium-font-size\">Where <strong>WW<\/strong> is the ASCII code of the alphanumeric character represented in hexadecimal format.\u00a0 As all the non-alphanumeric characters in the binary data are URL encoded where 1 byte is converted to 3 bytes. So size is increased three folds.\u00a0 So if you sending a file or image which is a lot of binary data then your payload will be very big i.e almost thrice the size of the actual payload. Hence it is inefficient for sending large binary files or large NON-ASCII data.<\/p>\n\n\n\n<p class=\"has-medium-font-size\">To fully understand the format of <strong>application\/x-www-form-urlencoded\u00a0 <\/strong>please refer to this link<\/p>\n\n\n\n<p class=\"has-medium-font-size\">Now let&#8217;s understand the format of <strong>multipart\/form-data.<\/strong><\/p>\n\n\n\n<p class=\"has-medium-font-size\">As we mentioned before as well <strong>multipart\/form-data<\/strong> has different parts separated by a delimiter or a boundary. Each part is described by its own header. The format of multipart\/form-data is as below<\/p>\n\n\n\n<pre class=\"wp-block-prismatic-blocks\"><code class=\"language-bash\">--<delimiter_or_boundary>\nContent-Disposition: form-data; name=\"<key1>\"\nContent-Type: <content-type>\n\n[DATA]\n--<delimiter_or_boundary>\nContent-Disposition: form-data; name=\"<key2>\"; filename=\"<filename>\"\nContent-Type: <content-type>\n[DATA]\n--<delimiter_or_boundary>--<\/code><\/pre>\n\n\n\n<p class=\"has-medium-font-size\">As you can notice above that format starts with a delimiter or boundary and ends with a delimiter or boundary. The above format is divided into two parts. Also,<\/p>\n\n\n\n<ul class=\"has-medium-font-size wp-block-list\"><li>Each part is separated by a delimiter or boundary.<\/li><\/ul>\n\n\n\n<ul class=\"has-medium-font-size wp-block-list\"><li>Each part contains its own headers to describe the type of data<\/li><\/ul>\n\n\n\n<ul class=\"has-medium-font-size wp-block-list\"><li>Content-Disposition header for each part will be <strong>form-data. <\/strong>Contains the name field. This field contains the key name. If the part is a file\u00a0 and it will also a <strong>filename<\/strong> field<\/li><\/ul>\n\n\n\n<ul class=\"has-medium-font-size wp-block-list\"><li>Each part will also contain its own data.<\/li><\/ul>\n\n\n\n<p class=\"has-medium-font-size\">Content-Disposition header for each part will be <strong>form-data. <\/strong>If you are sending binary data then\u00a0<\/p>\n\n\n\n<p class=\"has-medium-font-size\">Let&#8217;s say we are sending the below data as part of <strong>multipart\/form-data<\/strong> request<\/p>\n\n\n\n<ul class=\"has-medium-font-size wp-block-list\"><li>name = John<\/li><\/ul>\n\n\n\n<ul class=\"has-medium-font-size wp-block-list\"><li>age =23<\/li><\/ul>\n\n\n\n<ul class=\"has-medium-font-size wp-block-list\"><li>photo = Some binary data<\/li><\/ul>\n\n\n\n<p class=\"has-medium-font-size\">And let&#8217;s say the delimiter or boundary is<\/p>\n\n\n\n<pre class=\"wp-block-prismatic-blocks\"><code class=\"language-go\">xyz<\/code><\/pre>\n\n\n\n<p class=\"has-medium-font-size\">Then the format will be as below<\/p>\n\n\n\n<pre class=\"wp-block-prismatic-blocks\"><code class=\"language-go\">--xyz\nContent-Disposition: form-data; name=\"name\"\nContent-Type: text\/plain\n\nJohn\n--xyz\nContent-Disposition: form-data; name=\"age\"\nContent-Type: text\/plain\n\n23\n--xyz\nContent-Disposition: form-data; name=\"photo\"; filename=\"photo.jpeg\"\nContent-Type: image\/jpeg\n\n[JPEG DATA]\n--xyz--<\/code><\/pre>\n\n\n\n<p class=\"has-medium-font-size\">As <strong>multipart\/form-data<\/strong> will send the binary data as it is, that is why it is used for sending files and large binary data. Now the question is. Why not use form-data all the time then?<\/p>\n\n\n\n<p class=\"has-medium-font-size\">The reason is that for small data the additional requirement of boundary string and headers will outweigh any optimizations.&nbsp;For example, let&#8217;s say we have the below data to be sent<\/p>\n\n\n\n<ul class=\"has-medium-font-size wp-block-list\"><li>name=John<\/li><\/ul>\n\n\n\n<ul class=\"has-medium-font-size wp-block-list\"><li>age=23<\/li><\/ul>\n\n\n\n<p class=\"has-medium-font-size\">Then while using <strong>application\/x-www-form-urlencoded<\/strong> the data will be sent as<\/p>\n\n\n\n<pre class=\"wp-block-prismatic-blocks\"><code class=\"language-go\">name=John&age=23<\/code><\/pre>\n\n\n\n<p class=\"has-medium-font-size\">But while sending <strong>multipart\/form-data <\/strong>the data will be sent as below which is almost 10 times the data that is sent in <strong>application\/x-www-form-urlencoded<\/strong><\/p>\n\n\n\n<pre class=\"wp-block-prismatic-blocks\"><code class=\"language-go\">--xyz\nContent-Disposition: form-data; name=\"name\"\nContent-Type: text\/plain\n\nJohn\n--xyz\nContent-Disposition: form-data; name=\"age\"\nContent-Type: text\/plain\n\n23\n--xyz--<\/code><\/pre>\n\n\n\n<p class=\"has-medium-font-size\"><strong>Conclusion<\/strong><\/p>\n\n\n\n<p class=\"has-medium-font-size\">This is all about multipart\/form-data. Hope you have liked this article. Please share feedback in the comments<\/p>\n","protected":false},"excerpt":{"rendered":"<p>In HTTP context, the multipart\/form-data content-type is used for submitting HTML form. In the case of multipart\/form-data, as the name suggests the body consists of different parts separated by a delimiter or&#8230;<\/p>\n","protected":false},"author":1,"featured_media":0,"comment_status":"open","ping_status":"open","sticky":false,"template":"","format":"standard","meta":{"spay_email":"","footnotes":"","jetpack_publicize_message":"","jetpack_is_tweetstorm":false},"categories":[1],"tags":[],"class_list":["post-4988","post","type-post","status-publish","format-standard","hentry","category-tech"],"yoast_head":"<!-- This site is optimized with the Yoast SEO plugin v22.7 - https:\/\/yoast.com\/wordpress\/plugins\/seo\/ -->\n<title>HTTP- Understanding multipart\/form-data content-type - Welcome To Golang By Example<\/title>\n<meta name=\"robots\" content=\"index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1\" \/>\n<link rel=\"canonical\" href=\"https:\/\/golangbyexamples.com\/multipart-form-data-content-type-golang\/\" \/>\n<meta property=\"og:locale\" content=\"en_US\" \/>\n<meta property=\"og:type\" content=\"article\" \/>\n<meta property=\"og:title\" content=\"HTTP- Understanding multipart\/form-data content-type - Welcome To Golang By Example\" \/>\n<meta property=\"og:description\" content=\"In HTTP context, the multipart\/form-data content-type is used for submitting HTML form. In the case of multipart\/form-data, as the name suggests the body consists of different parts separated by a delimiter or...\" \/>\n<meta property=\"og:url\" content=\"https:\/\/golangbyexamples.com\/multipart-form-data-content-type-golang\/\" \/>\n<meta property=\"og:site_name\" content=\"Welcome To Golang By Example\" \/>\n<meta property=\"article:published_time\" content=\"2021-01-18T18:54:54+00:00\" \/>\n<meta property=\"article:modified_time\" content=\"2021-01-18T18:55:02+00:00\" \/>\n<meta name=\"author\" content=\"admin\" \/>\n<meta name=\"twitter:card\" content=\"summary_large_image\" \/>\n<meta name=\"twitter:label1\" content=\"Written by\" \/>\n\t<meta name=\"twitter:data1\" content=\"admin\" \/>\n\t<meta name=\"twitter:label2\" content=\"Est. reading time\" \/>\n\t<meta name=\"twitter:data2\" content=\"4 minutes\" \/>\n<script type=\"application\/ld+json\" class=\"yoast-schema-graph\">{\"@context\":\"https:\/\/schema.org\",\"@graph\":[{\"@type\":\"WebPage\",\"@id\":\"https:\/\/golangbyexamples.com\/multipart-form-data-content-type-golang\/\",\"url\":\"https:\/\/golangbyexamples.com\/multipart-form-data-content-type-golang\/\",\"name\":\"HTTP- Understanding multipart\/form-data content-type - Welcome To Golang By Example\",\"isPartOf\":{\"@id\":\"https:\/\/golangbyexamples.com\/#website\"},\"datePublished\":\"2021-01-18T18:54:54+00:00\",\"dateModified\":\"2021-01-18T18:55:02+00:00\",\"author\":{\"@id\":\"https:\/\/golangbyexamples.com\/#\/schema\/person\/8833ea7638dafd763cb1db6c0ca4576f\"},\"breadcrumb\":{\"@id\":\"https:\/\/golangbyexamples.com\/multipart-form-data-content-type-golang\/#breadcrumb\"},\"inLanguage\":\"en-US\",\"potentialAction\":[{\"@type\":\"ReadAction\",\"target\":[\"https:\/\/golangbyexamples.com\/multipart-form-data-content-type-golang\/\"]}]},{\"@type\":\"BreadcrumbList\",\"@id\":\"https:\/\/golangbyexamples.com\/multipart-form-data-content-type-golang\/#breadcrumb\",\"itemListElement\":[{\"@type\":\"ListItem\",\"position\":1,\"name\":\"Home\",\"item\":\"https:\/\/golangbyexamples.com\/\"},{\"@type\":\"ListItem\",\"position\":2,\"name\":\"HTTP- Understanding multipart\/form-data content-type\"}]},{\"@type\":\"WebSite\",\"@id\":\"https:\/\/golangbyexamples.com\/#website\",\"url\":\"https:\/\/golangbyexamples.com\/\",\"name\":\"Welcome To Golang By Example\",\"description\":\"\",\"potentialAction\":[{\"@type\":\"SearchAction\",\"target\":{\"@type\":\"EntryPoint\",\"urlTemplate\":\"https:\/\/golangbyexamples.com\/?s={search_term_string}\"},\"query-input\":\"required name=search_term_string\"}],\"inLanguage\":\"en-US\"},{\"@type\":\"Person\",\"@id\":\"https:\/\/golangbyexamples.com\/#\/schema\/person\/8833ea7638dafd763cb1db6c0ca4576f\",\"name\":\"admin\",\"image\":{\"@type\":\"ImageObject\",\"inLanguage\":\"en-US\",\"@id\":\"https:\/\/golangbyexamples.com\/#\/schema\/person\/image\/\",\"url\":\"https:\/\/secure.gravatar.com\/avatar\/?s=96&d=mm&r=g\",\"contentUrl\":\"https:\/\/secure.gravatar.com\/avatar\/?s=96&d=mm&r=g\",\"caption\":\"admin\"},\"url\":\"https:\/\/golangbyexamples.com\/author\/admin\/\"}]}<\/script>\n<!-- \/ Yoast SEO plugin. -->","yoast_head_json":{"title":"HTTP- Understanding multipart\/form-data content-type - Welcome To Golang By Example","robots":{"index":"index","follow":"follow","max-snippet":"max-snippet:-1","max-image-preview":"max-image-preview:large","max-video-preview":"max-video-preview:-1"},"canonical":"https:\/\/golangbyexamples.com\/multipart-form-data-content-type-golang\/","og_locale":"en_US","og_type":"article","og_title":"HTTP- Understanding multipart\/form-data content-type - Welcome To Golang By Example","og_description":"In HTTP context, the multipart\/form-data content-type is used for submitting HTML form. In the case of multipart\/form-data, as the name suggests the body consists of different parts separated by a delimiter or...","og_url":"https:\/\/golangbyexamples.com\/multipart-form-data-content-type-golang\/","og_site_name":"Welcome To Golang By Example","article_published_time":"2021-01-18T18:54:54+00:00","article_modified_time":"2021-01-18T18:55:02+00:00","author":"admin","twitter_card":"summary_large_image","twitter_misc":{"Written by":"admin","Est. reading time":"4 minutes"},"schema":{"@context":"https:\/\/schema.org","@graph":[{"@type":"WebPage","@id":"https:\/\/golangbyexamples.com\/multipart-form-data-content-type-golang\/","url":"https:\/\/golangbyexamples.com\/multipart-form-data-content-type-golang\/","name":"HTTP- Understanding multipart\/form-data content-type - Welcome To Golang By Example","isPartOf":{"@id":"https:\/\/golangbyexamples.com\/#website"},"datePublished":"2021-01-18T18:54:54+00:00","dateModified":"2021-01-18T18:55:02+00:00","author":{"@id":"https:\/\/golangbyexamples.com\/#\/schema\/person\/8833ea7638dafd763cb1db6c0ca4576f"},"breadcrumb":{"@id":"https:\/\/golangbyexamples.com\/multipart-form-data-content-type-golang\/#breadcrumb"},"inLanguage":"en-US","potentialAction":[{"@type":"ReadAction","target":["https:\/\/golangbyexamples.com\/multipart-form-data-content-type-golang\/"]}]},{"@type":"BreadcrumbList","@id":"https:\/\/golangbyexamples.com\/multipart-form-data-content-type-golang\/#breadcrumb","itemListElement":[{"@type":"ListItem","position":1,"name":"Home","item":"https:\/\/golangbyexamples.com\/"},{"@type":"ListItem","position":2,"name":"HTTP- Understanding multipart\/form-data content-type"}]},{"@type":"WebSite","@id":"https:\/\/golangbyexamples.com\/#website","url":"https:\/\/golangbyexamples.com\/","name":"Welcome To Golang By Example","description":"","potentialAction":[{"@type":"SearchAction","target":{"@type":"EntryPoint","urlTemplate":"https:\/\/golangbyexamples.com\/?s={search_term_string}"},"query-input":"required name=search_term_string"}],"inLanguage":"en-US"},{"@type":"Person","@id":"https:\/\/golangbyexamples.com\/#\/schema\/person\/8833ea7638dafd763cb1db6c0ca4576f","name":"admin","image":{"@type":"ImageObject","inLanguage":"en-US","@id":"https:\/\/golangbyexamples.com\/#\/schema\/person\/image\/","url":"https:\/\/secure.gravatar.com\/avatar\/?s=96&d=mm&r=g","contentUrl":"https:\/\/secure.gravatar.com\/avatar\/?s=96&d=mm&r=g","caption":"admin"},"url":"https:\/\/golangbyexamples.com\/author\/admin\/"}]}},"jetpack_featured_media_url":"","jetpack_publicize_connections":[],"jetpack_sharing_enabled":true,"jetpack_shortlink":"https:\/\/wp.me\/paOs1b-1is","amp_validity":null,"amp_enabled":true,"_links":{"self":[{"href":"https:\/\/golangbyexamples.com\/wp-json\/wp\/v2\/posts\/4988","targetHints":{"allow":["GET"]}}],"collection":[{"href":"https:\/\/golangbyexamples.com\/wp-json\/wp\/v2\/posts"}],"about":[{"href":"https:\/\/golangbyexamples.com\/wp-json\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"https:\/\/golangbyexamples.com\/wp-json\/wp\/v2\/users\/1"}],"replies":[{"embeddable":true,"href":"https:\/\/golangbyexamples.com\/wp-json\/wp\/v2\/comments?post=4988"}],"version-history":[{"count":2,"href":"https:\/\/golangbyexamples.com\/wp-json\/wp\/v2\/posts\/4988\/revisions"}],"predecessor-version":[{"id":4990,"href":"https:\/\/golangbyexamples.com\/wp-json\/wp\/v2\/posts\/4988\/revisions\/4990"}],"wp:attachment":[{"href":"https:\/\/golangbyexamples.com\/wp-json\/wp\/v2\/media?parent=4988"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"https:\/\/golangbyexamples.com\/wp-json\/wp\/v2\/categories?post=4988"},{"taxonomy":"post_tag","embeddable":true,"href":"https:\/\/golangbyexamples.com\/wp-json\/wp\/v2\/tags?post=4988"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}
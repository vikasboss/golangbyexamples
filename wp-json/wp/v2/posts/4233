{"id":4233,"date":"2020-10-28T23:56:44","date_gmt":"2020-10-28T18:26:44","guid":{"rendered":"https:\/\/golangbyexamples.com\/?p=4233"},"modified":"2020-11-03T01:16:30","modified_gmt":"2020-11-02T19:46:30","slug":"direct-indirect-dependency-module-go","status":"publish","type":"post","link":"https:\/\/golangbyexamples.com\/direct-indirect-dependency-module-go\/","title":{"rendered":"Direct vs Indirect Dependencies in go.mod file in Go"},"content":{"rendered":"\n<div id=\"ez-toc-container\" class=\"ez-toc-v2_0_17 counter-hierarchy counter-decimal ez-toc-light-blue\">\n<div class=\"ez-toc-title-container\">\n<p class=\"ez-toc-title\">Table of Contents<\/p>\n<span class=\"ez-toc-title-toggle\"><a class=\"ez-toc-pull-right ez-toc-btn ez-toc-btn-xs ez-toc-btn-default ez-toc-toggle\" style=\"display: none;\"><i class=\"ez-toc-glyphicon ez-toc-icon-toggle\"><\/i><\/a><\/span><\/div>\n<nav><ul class=\"ez-toc-list ez-toc-list-level-1\"><li class=\"ez-toc-page-1 ez-toc-heading-level-1\"><a class=\"ez-toc-link ez-toc-heading-1\" href=\"https:\/\/golangbyexamples.com\/direct-indirect-dependency-module-go\/#Overview\" title=\"Overview\">Overview<\/a><\/li><li class=\"ez-toc-page-1 ez-toc-heading-level-1\"><a class=\"ez-toc-link ez-toc-heading-2\" href=\"https:\/\/golangbyexamples.com\/direct-indirect-dependency-module-go\/#Example_of_direct_and_indirect_dependency\" title=\"Example of direct and indirect dependency\">Example of direct and indirect dependency<\/a><\/li><li class=\"ez-toc-page-1 ez-toc-heading-level-1\"><a class=\"ez-toc-link ez-toc-heading-3\" href=\"https:\/\/golangbyexamples.com\/direct-indirect-dependency-module-go\/#Example_of_indirect_dependency_in_gomod_file\" title=\"Example of indirect dependency in go.mod file\">Example of indirect dependency in go.mod file<\/a><\/li><\/ul><\/nav><\/div>\n<h1 class=\"wp-block-heading\"><span class=\"ez-toc-section\" id=\"Overview\"><\/span><strong>Overview<\/strong><span class=\"ez-toc-section-end\"><\/span><\/h1>\n\n\n\n<p class=\"has-medium-font-size\">Module is Go support for dependency management. A module by definition is a collection of related packages with <strong>go.mod<\/strong> at its root.&nbsp; The <strong>go.mod<\/strong> file defines the<\/p>\n\n\n\n<ul class=\"has-medium-font-size wp-block-list\"><li>Module import path.<\/li><\/ul>\n\n\n\n<ul class=\"has-medium-font-size wp-block-list\"><li>Dependencies requirements of the module for a successful build. It defines both module&#8217;s dependencies requirement and also lock them to their correct version.<\/li><\/ul>\n\n\n\n<p class=\"has-medium-font-size\">A dependency of a module can be of two kinds<\/p>\n\n\n\n<ul class=\"has-medium-font-size wp-block-list\"><li><strong>Direct<\/strong> -A direct dependency is a dependency which the module directly imports.<\/li><li><strong>Indirect<\/strong> &#8211; It is the dependency that is imported by the module&#8217;s direct dependencies. Also, any dependency that is mentioned in the go.mod file but not imported in any of the source files of the module is also treated as an indirect dependency.<\/li><\/ul>\n\n\n\n<p class=\"has-medium-font-size\"><strong>go.mod<\/strong> file only records the direct dependency. However, it may record an indirect dependency in the below cases<\/p>\n\n\n\n<ul class=\"has-medium-font-size wp-block-list\"><li>Any indirect dependency which is not listed in the go.mod file of your direct dependency or if direct dependency doesn&#8217;t have a <strong>go.mod<\/strong> file, then that dependency will be added to the go.mod file with \/\/indirect as the suffix<\/li><li>Any dependency which is not imported in any of the source files of the module.<\/li><\/ul>\n\n\n\n<p class=\"has-medium-font-size\"><strong>go.sum<\/strong> will record the checksum of both direct and indirect dependencies<\/p>\n\n\n\n<h1 class=\"wp-block-heading\"><span class=\"ez-toc-section\" id=\"Example_of_direct_and_indirect_dependency\"><\/span><strong>Example of direct and indirect dependency<\/strong><span class=\"ez-toc-section-end\"><\/span><\/h1>\n\n\n\n<p class=\"has-medium-font-size\">Let&#8217;s see an example of direct dependency.&nbsp; For that let&#8217;s first create a module<\/p>\n\n\n\n<pre class=\"wp-block-prismatic-blocks\"><code class=\"language-go\">git mod init learn<\/code><\/pre>\n\n\n\n<p class=\"has-medium-font-size\">Now create a file <strong>learn.go<\/strong><\/p>\n\n\n\n<pre class=\"wp-block-prismatic-blocks\"><code class=\"language-go\">package main\n\nimport (\n\t\"github.com\/pborman\/uuid\"\n)\n\nfunc main() {\n\t_ = uuid.NewRandom()\n}<\/code><\/pre>\n\n\n\n<p class=\"has-medium-font-size\">Notice that we have specified the dependency in the <strong>learn.go<\/strong> as<\/p>\n\n\n\n<pre class=\"wp-block-prismatic-blocks\"><code class=\"language-go\">\"github.com\/pborman\/uuid\"<\/code><\/pre>\n\n\n\n<p class=\"has-medium-font-size\">So <strong><a href=\"http:\/\/github.com\">github.com<\/a>\/pborman\/uuid <\/strong>is a direct dependency of the learn module as it is directly imported in the module. Now let&#8217;s run the below command<\/p>\n\n\n\n<pre class=\"wp-block-prismatic-blocks\"><code class=\"language-go\">go mod tidy<\/code><\/pre>\n\n\n\n<p class=\"has-medium-font-size\">This command will download all the dependencies that are required in your source files. After running this command let&#8217;s now let&#8217;s again examine the contents of <strong>go.mod<\/strong> file<\/p>\n\n\n\n<p class=\"has-medium-font-size\">Do a cat<strong> go.mod<\/strong><\/p>\n\n\n\n<pre class=\"wp-block-prismatic-blocks\"><code class=\"language-go\">module learn\n\ngo 1.14\n\nrequire github.com\/pborman\/uuid v1.2.1<\/code><\/pre>\n\n\n\n<p class=\"has-medium-font-size\">It lists direct dependency which was specified in the <strong>learn.go<\/strong> file along with exact version of the dependency as well. Now let&#8217;s check the go.sum file as well<\/p>\n\n\n\n<p class=\"has-medium-font-size\">Do a cat<strong> go.sum<\/strong><\/p>\n\n\n\n<pre class=\"wp-block-prismatic-blocks\"><code class=\"language-go\">github.com\/google\/uuid v1.0.0 h1:b4Gk+7WdP\/d3HZH8EJsZpvV7EtDOgaZLtnaNGIu1adA=\ngithub.com\/google\/uuid v1.0.0\/go.mod h1:TIyPZe4MgqvfeYDBFedMoGGpEw\/LqOeaOT+nhxU+yHo=\ngithub.com\/pborman\/uuid v1.2.1 h1:+ZZIw58t\/ozdjRaXh\/3awHfmWRbzYxJoAdNJxe\/3pvw=\ngithub.com\/pborman\/uuid v1.2.1\/go.mod h1:X\/NO0urCmaxf9VXbdlT7C2Yzkj2IKimNn4k+gtPdI\/k=<\/code><\/pre>\n\n\n\n<p class=\"has-medium-font-size\"><strong>go.sum<\/strong> file lists down the checksum of direct and indirect dependency required by the module.&nbsp; <a href=\"http:\/\/github.com\">github.com<\/a>\/google\/uuid is internally used by the <a href=\"http:\/\/github.com\">github.com<\/a>\/pborman\/uuid and it is an indirect dependency of the module and hence it is recorded in the <strong>go.sum<\/strong> file.<\/p>\n\n\n\n<p class=\"has-medium-font-size\">The above way we added a dependency in the source file and used <strong>go mod tidy<\/strong> command to download that dependency and add it in the <strong>go.mod<\/strong> file.<\/p>\n\n\n\n<h1 class=\"wp-block-heading\"><span class=\"ez-toc-section\" id=\"Example_of_indirect_dependency_in_gomod_file\"><\/span><strong>Example of indirect dependency in go.mod file<\/strong><span class=\"ez-toc-section-end\"><\/span><\/h1>\n\n\n\n<p class=\"has-medium-font-size\">Let&#8217;s understand it with an example. For that let&#8217;s first create a module<\/p>\n\n\n\n<pre class=\"wp-block-prismatic-blocks\"><code class=\"language-go\">git mod init learn<\/code><\/pre>\n\n\n\n<p class=\"has-medium-font-size\">Now create a file <strong>learn.go<\/strong><\/p>\n\n\n\n<pre class=\"wp-block-prismatic-blocks\"><code class=\"language-go\">package main\n\nimport (\n\t\"github.com\/gocolly\/colly\"\n)\n\nfunc main() {\n\t_ = colly.NewCollector()<\/code><\/pre>\n\n\n\n<p class=\"has-medium-font-size\">Notice that we have specified the dependency in the <strong>learn.go <\/strong>as<\/p>\n\n\n\n<pre class=\"wp-block-prismatic-blocks\"><code class=\"language-go\">github.com\/gocolly\/colly<\/code><\/pre>\n\n\n\n<p class=\"has-medium-font-size\">So github.com\/gocolly\/colly is a direct dependency of the learn module as it is directly imported in the module.Let&#8217;s add colly version v1.2.0 as a dependency in the go.mod file<\/p>\n\n\n\n<pre class=\"wp-block-prismatic-blocks\"><code class=\"language-go\">module learn\n\ngo 1.14\n\nrequire\tgithub.com\/gocolly\/colly v1.2.0<\/code><\/pre>\n\n\n\n<p class=\"has-medium-font-size\"> Now let&#8217;s run the below command<\/p>\n\n\n\n<pre class=\"wp-block-prismatic-blocks\"><code class=\"language-go\">go mod tidy<\/code><\/pre>\n\n\n\n<p class=\"has-medium-font-size\">After running this command let&#8217;s now let&#8217;s again examine the contents of <strong>go.mod<\/strong> file. Since colly version v1.2.0 doesn&#8217;t have a go.mod file , all dependencies required by colly will be added to the <strong>go.mod<\/strong> file with <strong>\/\/indirect <\/strong>as suffix<\/p>\n\n\n\n<p class=\"has-medium-font-size\">Do a <strong>cat go.mod<\/strong><\/p>\n\n\n\n<pre class=\"wp-block-prismatic-blocks\"><code class=\"language-go\">module learn\n\ngo 1.14\n\nrequire (\n\tgithub.com\/PuerkitoBio\/goquery v1.6.0 \/\/ indirect\n\tgithub.com\/antchfx\/htmlquery v1.2.3 \/\/ indirect\n\tgithub.com\/antchfx\/xmlquery v1.3.3 \/\/ indirect\n\tgithub.com\/gobwas\/glob v0.2.3 \/\/ indirect\n\tgithub.com\/gocolly\/colly v1.2.0\n\tgithub.com\/kennygrant\/sanitize v1.2.4 \/\/ indirect\n\tgithub.com\/saintfish\/chardet v0.0.0-20120816061221-3af4cd4741ca \/\/ indirect\n\tgithub.com\/temoto\/robotstxt v1.1.1 \/\/ indirect\n\tgolang.org\/x\/net v0.0.0-20201027133719-8eef5233e2a1 \/\/ indirect\n\tgoogle.golang.org\/appengine v1.6.7 \/\/ indirect\n)<\/code><\/pre>\n\n\n\n<p class=\"has-medium-font-size\">All other dependencies are suffixed by <strong>\/\/indirect<\/strong>. Also checksum of all direct and indirect dependencies will be recorded in the go.sum file.<\/p>\n\n\n\n<p class=\"has-medium-font-size\">We also mentioned that any dependency which is not imported in any of the source file will be marked as \/\/indirect. To illustrate that delete the <strong>learn.go<\/strong> created above. Also clean up <strong>go.mod <\/strong>file to remove all require lines. Now run below command<\/p>\n\n\n\n<pre class=\"wp-block-prismatic-blocks\"><code class=\"language-go\">go get github.com\/pborman\/uuid<\/code><\/pre>\n\n\n\n<p class=\"has-medium-font-size\">Now check the contents of <strong>go.mod<\/strong> file<\/p>\n\n\n\n<pre class=\"wp-block-prismatic-blocks\"><code class=\"language-go\">module learn\n\ngo 1.14\n\nrequire github.com\/pborman\/uuid v1.2.1 \/\/ indirect<\/code><\/pre>\n\n\n\n<p class=\"has-medium-font-size\">Notice that the dependency is recorded as \/\/indirect as it is not imported in any of the source files.<\/p>\n","protected":false},"excerpt":{"rendered":"<p>Table of Contents OverviewExample of direct and indirect dependencyExample of indirect dependency in go.mod file Overview Module is Go support for dependency management. A module by definition is a collection of related&#8230;<\/p>\n","protected":false},"author":1,"featured_media":0,"comment_status":"open","ping_status":"open","sticky":false,"template":"","format":"standard","meta":{"spay_email":"","footnotes":"","jetpack_publicize_message":"","jetpack_is_tweetstorm":false},"categories":[1],"tags":[3,4],"class_list":["post-4233","post","type-post","status-publish","format-standard","hentry","category-tech","tag-go","tag-golang"],"yoast_head":"<!-- This site is optimized with the Yoast SEO plugin v22.7 - https:\/\/yoast.com\/wordpress\/plugins\/seo\/ -->\n<title>Direct vs Indirect Dependencies in go.mod file in Go - Welcome To Golang By Example<\/title>\n<meta name=\"robots\" content=\"index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1\" \/>\n<link rel=\"canonical\" href=\"https:\/\/golangbyexamples.com\/direct-indirect-dependency-module-go\/\" \/>\n<meta property=\"og:locale\" content=\"en_US\" \/>\n<meta property=\"og:type\" content=\"article\" \/>\n<meta property=\"og:title\" content=\"Direct vs Indirect Dependencies in go.mod file in Go - Welcome To Golang By Example\" \/>\n<meta property=\"og:description\" content=\"Table of Contents OverviewExample of direct and indirect dependencyExample of indirect dependency in go.mod file Overview Module is Go support for dependency management. A module by definition is a collection of related...\" \/>\n<meta property=\"og:url\" content=\"https:\/\/golangbyexamples.com\/direct-indirect-dependency-module-go\/\" \/>\n<meta property=\"og:site_name\" content=\"Welcome To Golang By Example\" \/>\n<meta property=\"article:published_time\" content=\"2020-10-28T18:26:44+00:00\" \/>\n<meta property=\"article:modified_time\" content=\"2020-11-02T19:46:30+00:00\" \/>\n<meta name=\"author\" content=\"admin\" \/>\n<meta name=\"twitter:card\" content=\"summary_large_image\" \/>\n<meta name=\"twitter:label1\" content=\"Written by\" \/>\n\t<meta name=\"twitter:data1\" content=\"admin\" \/>\n\t<meta name=\"twitter:label2\" content=\"Est. reading time\" \/>\n\t<meta name=\"twitter:data2\" content=\"4 minutes\" \/>\n<script type=\"application\/ld+json\" class=\"yoast-schema-graph\">{\"@context\":\"https:\/\/schema.org\",\"@graph\":[{\"@type\":\"WebPage\",\"@id\":\"https:\/\/golangbyexamples.com\/direct-indirect-dependency-module-go\/\",\"url\":\"https:\/\/golangbyexamples.com\/direct-indirect-dependency-module-go\/\",\"name\":\"Direct vs Indirect Dependencies in go.mod file in Go - Welcome To Golang By Example\",\"isPartOf\":{\"@id\":\"https:\/\/golangbyexamples.com\/#website\"},\"datePublished\":\"2020-10-28T18:26:44+00:00\",\"dateModified\":\"2020-11-02T19:46:30+00:00\",\"author\":{\"@id\":\"https:\/\/golangbyexamples.com\/#\/schema\/person\/8833ea7638dafd763cb1db6c0ca4576f\"},\"breadcrumb\":{\"@id\":\"https:\/\/golangbyexamples.com\/direct-indirect-dependency-module-go\/#breadcrumb\"},\"inLanguage\":\"en-US\",\"potentialAction\":[{\"@type\":\"ReadAction\",\"target\":[\"https:\/\/golangbyexamples.com\/direct-indirect-dependency-module-go\/\"]}]},{\"@type\":\"BreadcrumbList\",\"@id\":\"https:\/\/golangbyexamples.com\/direct-indirect-dependency-module-go\/#breadcrumb\",\"itemListElement\":[{\"@type\":\"ListItem\",\"position\":1,\"name\":\"Home\",\"item\":\"https:\/\/golangbyexamples.com\/\"},{\"@type\":\"ListItem\",\"position\":2,\"name\":\"Direct vs Indirect Dependencies in go.mod file in Go\"}]},{\"@type\":\"WebSite\",\"@id\":\"https:\/\/golangbyexamples.com\/#website\",\"url\":\"https:\/\/golangbyexamples.com\/\",\"name\":\"Welcome To Golang By Example\",\"description\":\"\",\"potentialAction\":[{\"@type\":\"SearchAction\",\"target\":{\"@type\":\"EntryPoint\",\"urlTemplate\":\"https:\/\/golangbyexamples.com\/?s={search_term_string}\"},\"query-input\":\"required name=search_term_string\"}],\"inLanguage\":\"en-US\"},{\"@type\":\"Person\",\"@id\":\"https:\/\/golangbyexamples.com\/#\/schema\/person\/8833ea7638dafd763cb1db6c0ca4576f\",\"name\":\"admin\",\"image\":{\"@type\":\"ImageObject\",\"inLanguage\":\"en-US\",\"@id\":\"https:\/\/golangbyexamples.com\/#\/schema\/person\/image\/\",\"url\":\"https:\/\/secure.gravatar.com\/avatar\/?s=96&d=mm&r=g\",\"contentUrl\":\"https:\/\/secure.gravatar.com\/avatar\/?s=96&d=mm&r=g\",\"caption\":\"admin\"},\"url\":\"https:\/\/golangbyexamples.com\/author\/admin\/\"}]}<\/script>\n<!-- \/ Yoast SEO plugin. -->","yoast_head_json":{"title":"Direct vs Indirect Dependencies in go.mod file in Go - Welcome To Golang By Example","robots":{"index":"index","follow":"follow","max-snippet":"max-snippet:-1","max-image-preview":"max-image-preview:large","max-video-preview":"max-video-preview:-1"},"canonical":"https:\/\/golangbyexamples.com\/direct-indirect-dependency-module-go\/","og_locale":"en_US","og_type":"article","og_title":"Direct vs Indirect Dependencies in go.mod file in Go - Welcome To Golang By Example","og_description":"Table of Contents OverviewExample of direct and indirect dependencyExample of indirect dependency in go.mod file Overview Module is Go support for dependency management. A module by definition is a collection of related...","og_url":"https:\/\/golangbyexamples.com\/direct-indirect-dependency-module-go\/","og_site_name":"Welcome To Golang By Example","article_published_time":"2020-10-28T18:26:44+00:00","article_modified_time":"2020-11-02T19:46:30+00:00","author":"admin","twitter_card":"summary_large_image","twitter_misc":{"Written by":"admin","Est. reading time":"4 minutes"},"schema":{"@context":"https:\/\/schema.org","@graph":[{"@type":"WebPage","@id":"https:\/\/golangbyexamples.com\/direct-indirect-dependency-module-go\/","url":"https:\/\/golangbyexamples.com\/direct-indirect-dependency-module-go\/","name":"Direct vs Indirect Dependencies in go.mod file in Go - Welcome To Golang By Example","isPartOf":{"@id":"https:\/\/golangbyexamples.com\/#website"},"datePublished":"2020-10-28T18:26:44+00:00","dateModified":"2020-11-02T19:46:30+00:00","author":{"@id":"https:\/\/golangbyexamples.com\/#\/schema\/person\/8833ea7638dafd763cb1db6c0ca4576f"},"breadcrumb":{"@id":"https:\/\/golangbyexamples.com\/direct-indirect-dependency-module-go\/#breadcrumb"},"inLanguage":"en-US","potentialAction":[{"@type":"ReadAction","target":["https:\/\/golangbyexamples.com\/direct-indirect-dependency-module-go\/"]}]},{"@type":"BreadcrumbList","@id":"https:\/\/golangbyexamples.com\/direct-indirect-dependency-module-go\/#breadcrumb","itemListElement":[{"@type":"ListItem","position":1,"name":"Home","item":"https:\/\/golangbyexamples.com\/"},{"@type":"ListItem","position":2,"name":"Direct vs Indirect Dependencies in go.mod file in Go"}]},{"@type":"WebSite","@id":"https:\/\/golangbyexamples.com\/#website","url":"https:\/\/golangbyexamples.com\/","name":"Welcome To Golang By Example","description":"","potentialAction":[{"@type":"SearchAction","target":{"@type":"EntryPoint","urlTemplate":"https:\/\/golangbyexamples.com\/?s={search_term_string}"},"query-input":"required name=search_term_string"}],"inLanguage":"en-US"},{"@type":"Person","@id":"https:\/\/golangbyexamples.com\/#\/schema\/person\/8833ea7638dafd763cb1db6c0ca4576f","name":"admin","image":{"@type":"ImageObject","inLanguage":"en-US","@id":"https:\/\/golangbyexamples.com\/#\/schema\/person\/image\/","url":"https:\/\/secure.gravatar.com\/avatar\/?s=96&d=mm&r=g","contentUrl":"https:\/\/secure.gravatar.com\/avatar\/?s=96&d=mm&r=g","caption":"admin"},"url":"https:\/\/golangbyexamples.com\/author\/admin\/"}]}},"jetpack_featured_media_url":"","jetpack_publicize_connections":[],"jetpack_sharing_enabled":true,"jetpack_shortlink":"https:\/\/wp.me\/paOs1b-16h","amp_validity":null,"amp_enabled":true,"_links":{"self":[{"href":"https:\/\/golangbyexamples.com\/wp-json\/wp\/v2\/posts\/4233","targetHints":{"allow":["GET"]}}],"collection":[{"href":"https:\/\/golangbyexamples.com\/wp-json\/wp\/v2\/posts"}],"about":[{"href":"https:\/\/golangbyexamples.com\/wp-json\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"https:\/\/golangbyexamples.com\/wp-json\/wp\/v2\/users\/1"}],"replies":[{"embeddable":true,"href":"https:\/\/golangbyexamples.com\/wp-json\/wp\/v2\/comments?post=4233"}],"version-history":[{"count":10,"href":"https:\/\/golangbyexamples.com\/wp-json\/wp\/v2\/posts\/4233\/revisions"}],"predecessor-version":[{"id":4295,"href":"https:\/\/golangbyexamples.com\/wp-json\/wp\/v2\/posts\/4233\/revisions\/4295"}],"wp:attachment":[{"href":"https:\/\/golangbyexamples.com\/wp-json\/wp\/v2\/media?parent=4233"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"https:\/\/golangbyexamples.com\/wp-json\/wp\/v2\/categories?post=4233"},{"taxonomy":"post_tag","embeddable":true,"href":"https:\/\/golangbyexamples.com\/wp-json\/wp\/v2\/tags?post=4233"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}
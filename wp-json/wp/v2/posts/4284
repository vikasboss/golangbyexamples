{"id":4284,"date":"2020-11-03T00:09:12","date_gmt":"2020-11-02T18:39:12","guid":{"rendered":"https:\/\/golangbyexamples.com\/?p=4284"},"modified":"2020-11-03T00:09:19","modified_gmt":"2020-11-02T18:39:19","slug":"add-dependency-module-golang","status":"publish","type":"post","link":"https:\/\/golangbyexamples.com\/add-dependency-module-golang\/","title":{"rendered":"Add a dependency to your project or module in Go (Golang)"},"content":{"rendered":"\n<div id=\"ez-toc-container\" class=\"ez-toc-v2_0_17 counter-hierarchy counter-decimal ez-toc-light-blue\">\n<div class=\"ez-toc-title-container\">\n<p class=\"ez-toc-title\">Table of Contents<\/p>\n<span class=\"ez-toc-title-toggle\"><a class=\"ez-toc-pull-right ez-toc-btn ez-toc-btn-xs ez-toc-btn-default ez-toc-toggle\" style=\"display: none;\"><i class=\"ez-toc-glyphicon ez-toc-icon-toggle\"><\/i><\/a><\/span><\/div>\n<nav><ul class=\"ez-toc-list ez-toc-list-level-1\"><li class=\"ez-toc-page-1 ez-toc-heading-level-1\"><a class=\"ez-toc-link ez-toc-heading-1\" href=\"https:\/\/golangbyexamples.com\/add-dependency-module-golang\/#Overview\" title=\"Overview\">Overview<\/a><\/li><li class=\"ez-toc-page-1 ez-toc-heading-level-1\"><a class=\"ez-toc-link ez-toc-heading-2\" href=\"https:\/\/golangbyexamples.com\/add-dependency-module-golang\/#Directly_adding_it_to_the_gomod_file\" title=\"Directly adding it to the go.mod file\">Directly adding it to the go.mod file<\/a><\/li><li class=\"ez-toc-page-1 ez-toc-heading-level-1\"><a class=\"ez-toc-link ez-toc-heading-3\" href=\"https:\/\/golangbyexamples.com\/add-dependency-module-golang\/#Do_a_go_get\" title=\"Do a go get\">Do a go get<\/a><\/li><li class=\"ez-toc-page-1 ez-toc-heading-level-1\"><a class=\"ez-toc-link ez-toc-heading-4\" href=\"https:\/\/golangbyexamples.com\/add-dependency-module-golang\/#Add_the_dependency_to_your_source_code_and_do_a_go_mod_tidy\" title=\"Add the dependency to your source code and do a go mod tidy\">Add the dependency to your source code and do a go mod tidy<\/a><\/li><\/ul><\/nav><\/div>\n<h1 class=\"wp-block-heading\"><span class=\"ez-toc-section\" id=\"Overview\"><\/span><strong>Overview<\/strong><span class=\"ez-toc-section-end\"><\/span><\/h1>\n\n\n\n<p class=\"has-medium-font-size\">Module is go support for dependency management. A module by definition is a collection of related packages with <strong>go.mod<\/strong> at its root.\u00a0 The <strong>go.mod<\/strong> file defines the<\/p>\n\n\n\n<ul class=\"has-medium-font-size wp-block-list\"><li>Module import path<\/li><\/ul>\n\n\n\n<ul class=\"has-medium-font-size wp-block-list\"><li>Dependency requirements of the module for a successful build. It defines both module&#8217;s dependencies requirement and also locks them to their correct version.<\/li><\/ul>\n\n\n\n<p class=\"has-medium-font-size\">A dependency of a module can be of two kinds<\/p>\n\n\n\n<ul class=\"has-medium-font-size wp-block-list\"><li>Direct -A direct dependency is a dependency which the module directly imports.<\/li><\/ul>\n\n\n\n<ul class=\"has-medium-font-size wp-block-list\"><li>Indirect &#8211; It is the dependency that is imported by the module&#8217;s direct dependencies. Also, any dependency that is mentioned in the <strong>go.mod<\/strong> file but not imported in any of the source files of the module is also treated as an indirect dependency.<\/li><\/ul>\n\n\n\n<p class=\"has-medium-font-size\">Let&#8217;s explore some ways of adding dependency to your project<\/p>\n\n\n\n<ul class=\"has-medium-font-size wp-block-list\"><li>Directly adding it to the <strong>go.mod<\/strong> file<\/li><li>Do a <strong>go get<\/strong><\/li><li>Add the dependency to your source code and do a <strong>go mod tidy<\/strong><\/li><\/ul>\n\n\n\n<p class=\"has-medium-font-size\">Before looking at each of the ways, again let&#8217;s create a module first<\/p>\n\n\n\n<pre class=\"wp-block-prismatic-blocks\"><code class=\"language-go\">go mod init learn<\/code><\/pre>\n\n\n\n<p class=\"has-medium-font-size\">This command will create a <strong>go.mod<\/strong> file in the same directory.\u00a0 Since it is an empty module it doesn&#8217;t have any direct dependency specified yet. Now let&#8217;s explore different ways of adding a dependency<\/p>\n\n\n\n<h1 class=\"wp-block-heading\"><span class=\"ez-toc-section\" id=\"Directly_adding_it_to_the_gomod_file\"><\/span><strong>Directly adding it to the go.mod file<\/strong><span class=\"ez-toc-section-end\"><\/span><\/h1>\n\n\n\n<p class=\"has-medium-font-size\">We can\u00a0 add direct dependency to the go.mod file too. Let&#8217;s do that. Add below dependency to the <strong>go.mod<\/strong> file<\/p>\n\n\n\n<pre class=\"wp-block-prismatic-blocks\"><code class=\"language-go\">require github.com\/pborman\/uuid v1.2.1<\/code><\/pre>\n\n\n\n<p class=\"has-medium-font-size\">With this dependency <strong>go.mod<\/strong> file will look like below<\/p>\n\n\n\n<pre class=\"wp-block-prismatic-blocks\"><code class=\"language-go\">module learn\n\ngo 1.14\n\nrequire github.com\/pborman\/uuid v1.2.1<\/code><\/pre>\n\n\n\n<p class=\"has-medium-font-size\">Now we need to download the newly added dependency as well. Fo that we can use the below command<\/p>\n\n\n\n<pre class=\"wp-block-prismatic-blocks\"><code class=\"language-go\">go mod download<\/code><\/pre>\n\n\n\n<p class=\"has-medium-font-size\">This command will download the <strong>github.com\/pborman\/uuid<\/strong> module as well all its dependencies. Also it will update the <strong>go.sum<\/strong> file with the checksum and version of all direct and indirect dependencies. go build as well as go install also will download the dependencies and also build the binary. go run will also download and and run the binary as well. go mod download command is used when you want to pre download the dependencies without build or running it.<\/p>\n\n\n\n<h1 class=\"wp-block-heading\"><span class=\"ez-toc-section\" id=\"Do_a_go_get\"><\/span><strong>Do a go get<\/strong><span class=\"ez-toc-section-end\"><\/span><\/h1>\n\n\n\n<p class=\"has-medium-font-size\">Simply doing a go get will also the add the dependency in the go.mod file. Remove the uuid dependency we added above from go.mod file and clean up go.sum file. Now run below command<\/p>\n\n\n\n<pre class=\"wp-block-prismatic-blocks\"><code class=\"language-go\">export GO111MODULE=on\ngo get github.com\/pborman\/uuid<\/code><\/pre>\n\n\n\n<p class=\"has-medium-font-size\">Now check the contents of go.mod file. Do a <strong>cat go.mod<\/strong><\/p>\n\n\n\n<pre class=\"wp-block-prismatic-blocks\"><code class=\"language-go\">module learn\n\ngo 1.14\n\nrequire github.com\/pborman\/uuid v1.2.1 \/\/indirect<\/code><\/pre>\n\n\n\n<p class=\"has-medium-font-size\">The dependency will be marked as <strong>\/\/indirect<\/strong> as it is not being used in any of the source files. Once you do a go build after using this in the source files, the <strong>\/\/indirec<\/strong>t will be removed automatically by go. Also it will update the <strong>go.sum<\/strong> file with the checksum and version of all direct and indirect dependencies.<\/p>\n\n\n\n<h1 class=\"wp-block-heading\"><span class=\"ez-toc-section\" id=\"Add_the_dependency_to_your_source_code_and_do_a_go_mod_tidy\"><\/span><strong>Add the dependency to your source code and do a go mod tidy<\/strong><span class=\"ez-toc-section-end\"><\/span><\/h1>\n\n\n\n<p class=\"has-medium-font-size\">This method we already saw in the above example.\u00a0 Basically, go mod tidy command makes sure that your go.mod files reflect the dependencies that you have actually used in your project. When we run go mod tidy command then it will do two things<\/p>\n\n\n\n<ul class=\"has-medium-font-size wp-block-list\"><li>Add any dependency which is imported in the source files<\/li><\/ul>\n\n\n\n<ul class=\"has-medium-font-size wp-block-list\"><li>Remove any dependency which is mentioned in the <strong>go.mod<\/strong> file but not imported in any of the source files.<\/li><\/ul>\n\n\n\n<p class=\"has-medium-font-size\">Let&#8217;s see an example. Remove the dependency we added earlier in the go.mod file. Your go.mod file should like below<\/p>\n\n\n\n<pre class=\"wp-block-prismatic-blocks\"><code class=\"language-go\">module learn\n\ngo 1.14<\/code><\/pre>\n\n\n\n<p class=\"has-medium-font-size\">Also let&#8217;s create a file named <strong>uuid.go <\/strong>in the same directory with below contents<\/p>\n\n\n\n<p class=\"has-medium-font-size\"><strong>uuid.go<\/strong><\/p>\n\n\n\n<pre class=\"wp-block-prismatic-blocks\"><code class=\"language-\">package main\n\nimport (\n\t\"fmt\"\n\t\"strings\"\n\n\t\"github.com\/pborman\/uuid\"\n)\n\nfunc main() {\n\tuuidWithHyphen := uuid.NewRandom()\n\tuuid := strings.Replace(uuidWithHyphen.String(), \"-\", \"\", -1)\n\tfmt.Println(uuid)\n}<\/code><\/pre>\n\n\n\n<p class=\"has-medium-font-size\">Notice that we have imported the dependency in the uuid.go as well<\/p>\n\n\n\n<pre class=\"wp-block-prismatic-blocks\"><code class=\"language-go\">\"github.com\/pborman\/uuid\"<\/code><\/pre>\n\n\n\n<p class=\"has-medium-font-size\">Let&#8217;s run the below command<\/p>\n\n\n\n<pre class=\"wp-block-prismatic-blocks\"><code class=\"language-go\">go mod tidy<\/code><\/pre>\n\n\n\n<p class=\"has-medium-font-size\">This command will download all the dependencies that are required in your source files and update <strong>go.mod<\/strong> file with that dependency. After running this command let&#8217;s now let&#8217;s again examine the contents of <strong>go.mod<\/strong> file<\/p>\n\n\n\n<p class=\"has-medium-font-size\">Do a cat<strong> go.mod<\/strong><\/p>\n\n\n\n<pre class=\"wp-block-prismatic-blocks\"><code class=\"language-go\">module learn\n\ngo 1.14\n\nrequire github.com\/pborman\/uuid v1.2.1<\/code><\/pre>\n\n\n\n<p class=\"has-medium-font-size\">It lists direct dependency which was specified in the uuid file along with exact version of the dependency as well. Now let&#8217;s check the <strong>go.sum<\/strong> file as well. Do a cat<strong> go.sum<\/strong><\/p>\n\n\n\n<pre class=\"wp-block-prismatic-blocks\"><code class=\"language-go\">github.com\/google\/uuid v1.0.0 h1:b4Gk+7WdP\/d3HZH8EJsZpvV7EtDOgaZLtnaNGIu1adA=\ngithub.com\/google\/uuid v1.0.0\/go.mod h1:TIyPZe4MgqvfeYDBFedMoGGpEw\/LqOeaOT+nhxU+yHo=\ngithub.com\/pborman\/uuid v1.2.1 h1:+ZZIw58t\/ozdjRaXh\/3awHfmWRbzYxJoAdNJxe\/3pvw=\ngithub.com\/pborman\/uuid v1.2.1\/go.mod h1:X\/NO0urCmaxf9VXbdlT7C2Yzkj2IKimNn4k+gtPdI\/k=<\/code><\/pre>\n\n\n\n<p class=\"has-medium-font-size\">Now let&#8217;s see one more example where <strong>go mod tidy<\/strong> will remove the dependency from <strong>go.mod<\/strong> file if it is not required in the source files. To illustrate this let&#8217;s remove the <strong>uuid.go<\/strong> file that we created above. Now run the command<\/p>\n\n\n\n<pre class=\"wp-block-prismatic-blocks\"><code class=\"language-go\">go mod tidy -v<\/code><\/pre>\n\n\n\n<p class=\"has-medium-font-size\">It will give below output<\/p>\n\n\n\n<pre class=\"wp-block-prismatic-blocks\"><code class=\"language-go\">unused github.com\/pborman\/uuid<\/code><\/pre>\n\n\n\n<p class=\"has-medium-font-size\">Now examine the contents of <strong>go.mod<\/strong> file.\u00a0 It will be as below<\/p>\n\n\n\n<pre class=\"wp-block-prismatic-blocks\"><code class=\"language-go\">module learn\n\ngo 1.14<\/code><\/pre>\n\n\n\n<p class=\"has-medium-font-size\">The<\/p>\n\n\n\n<pre class=\"wp-block-prismatic-blocks\"><code class=\"language-go\">require github.com\/pborman\/uuid v1.2.1<\/code><\/pre>\n\n\n\n<p class=\"has-medium-font-size\">line will be removed as it is not required in any of the source files. Also all entries of <strong><a href=\"http:\/\/github.com\">github.com<\/a>\/pborman\/uuid<\/strong> and its depedencies will be removed from the <strong>go.sum<\/strong> file as well.<\/p>\n","protected":false},"excerpt":{"rendered":"<p>Table of Contents OverviewDirectly adding it to the go.mod fileDo a go getAdd the dependency to your source code and do a go mod tidy Overview Module is go support for dependency&#8230;<\/p>\n","protected":false},"author":1,"featured_media":0,"comment_status":"open","ping_status":"open","sticky":false,"template":"","format":"standard","meta":{"spay_email":"","footnotes":"","jetpack_publicize_message":"","jetpack_is_tweetstorm":false},"categories":[1],"tags":[3,4],"class_list":["post-4284","post","type-post","status-publish","format-standard","hentry","category-tech","tag-go","tag-golang"],"yoast_head":"<!-- This site is optimized with the Yoast SEO plugin v22.7 - https:\/\/yoast.com\/wordpress\/plugins\/seo\/ -->\n<title>Add a dependency to your project or module in Go (Golang) - Welcome To Golang By Example<\/title>\n<meta name=\"robots\" content=\"index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1\" \/>\n<link rel=\"canonical\" href=\"https:\/\/golangbyexamples.com\/add-dependency-module-golang\/\" \/>\n<meta property=\"og:locale\" content=\"en_US\" \/>\n<meta property=\"og:type\" content=\"article\" \/>\n<meta property=\"og:title\" content=\"Add a dependency to your project or module in Go (Golang) - Welcome To Golang By Example\" \/>\n<meta property=\"og:description\" content=\"Table of Contents OverviewDirectly adding it to the go.mod fileDo a go getAdd the dependency to your source code and do a go mod tidy Overview Module is go support for dependency...\" \/>\n<meta property=\"og:url\" content=\"https:\/\/golangbyexamples.com\/add-dependency-module-golang\/\" \/>\n<meta property=\"og:site_name\" content=\"Welcome To Golang By Example\" \/>\n<meta property=\"article:published_time\" content=\"2020-11-02T18:39:12+00:00\" \/>\n<meta property=\"article:modified_time\" content=\"2020-11-02T18:39:19+00:00\" \/>\n<meta name=\"author\" content=\"admin\" \/>\n<meta name=\"twitter:card\" content=\"summary_large_image\" \/>\n<meta name=\"twitter:label1\" content=\"Written by\" \/>\n\t<meta name=\"twitter:data1\" content=\"admin\" \/>\n\t<meta name=\"twitter:label2\" content=\"Est. reading time\" \/>\n\t<meta name=\"twitter:data2\" content=\"5 minutes\" \/>\n<script type=\"application\/ld+json\" class=\"yoast-schema-graph\">{\"@context\":\"https:\/\/schema.org\",\"@graph\":[{\"@type\":\"WebPage\",\"@id\":\"https:\/\/golangbyexamples.com\/add-dependency-module-golang\/\",\"url\":\"https:\/\/golangbyexamples.com\/add-dependency-module-golang\/\",\"name\":\"Add a dependency to your project or module in Go (Golang) - Welcome To Golang By Example\",\"isPartOf\":{\"@id\":\"https:\/\/golangbyexamples.com\/#website\"},\"datePublished\":\"2020-11-02T18:39:12+00:00\",\"dateModified\":\"2020-11-02T18:39:19+00:00\",\"author\":{\"@id\":\"https:\/\/golangbyexamples.com\/#\/schema\/person\/8833ea7638dafd763cb1db6c0ca4576f\"},\"breadcrumb\":{\"@id\":\"https:\/\/golangbyexamples.com\/add-dependency-module-golang\/#breadcrumb\"},\"inLanguage\":\"en-US\",\"potentialAction\":[{\"@type\":\"ReadAction\",\"target\":[\"https:\/\/golangbyexamples.com\/add-dependency-module-golang\/\"]}]},{\"@type\":\"BreadcrumbList\",\"@id\":\"https:\/\/golangbyexamples.com\/add-dependency-module-golang\/#breadcrumb\",\"itemListElement\":[{\"@type\":\"ListItem\",\"position\":1,\"name\":\"Home\",\"item\":\"https:\/\/golangbyexamples.com\/\"},{\"@type\":\"ListItem\",\"position\":2,\"name\":\"Add a dependency to your project or module in Go (Golang)\"}]},{\"@type\":\"WebSite\",\"@id\":\"https:\/\/golangbyexamples.com\/#website\",\"url\":\"https:\/\/golangbyexamples.com\/\",\"name\":\"Welcome To Golang By Example\",\"description\":\"\",\"potentialAction\":[{\"@type\":\"SearchAction\",\"target\":{\"@type\":\"EntryPoint\",\"urlTemplate\":\"https:\/\/golangbyexamples.com\/?s={search_term_string}\"},\"query-input\":\"required name=search_term_string\"}],\"inLanguage\":\"en-US\"},{\"@type\":\"Person\",\"@id\":\"https:\/\/golangbyexamples.com\/#\/schema\/person\/8833ea7638dafd763cb1db6c0ca4576f\",\"name\":\"admin\",\"image\":{\"@type\":\"ImageObject\",\"inLanguage\":\"en-US\",\"@id\":\"https:\/\/golangbyexamples.com\/#\/schema\/person\/image\/\",\"url\":\"https:\/\/secure.gravatar.com\/avatar\/?s=96&d=mm&r=g\",\"contentUrl\":\"https:\/\/secure.gravatar.com\/avatar\/?s=96&d=mm&r=g\",\"caption\":\"admin\"},\"url\":\"https:\/\/golangbyexamples.com\/author\/admin\/\"}]}<\/script>\n<!-- \/ Yoast SEO plugin. -->","yoast_head_json":{"title":"Add a dependency to your project or module in Go (Golang) - Welcome To Golang By Example","robots":{"index":"index","follow":"follow","max-snippet":"max-snippet:-1","max-image-preview":"max-image-preview:large","max-video-preview":"max-video-preview:-1"},"canonical":"https:\/\/golangbyexamples.com\/add-dependency-module-golang\/","og_locale":"en_US","og_type":"article","og_title":"Add a dependency to your project or module in Go (Golang) - Welcome To Golang By Example","og_description":"Table of Contents OverviewDirectly adding it to the go.mod fileDo a go getAdd the dependency to your source code and do a go mod tidy Overview Module is go support for dependency...","og_url":"https:\/\/golangbyexamples.com\/add-dependency-module-golang\/","og_site_name":"Welcome To Golang By Example","article_published_time":"2020-11-02T18:39:12+00:00","article_modified_time":"2020-11-02T18:39:19+00:00","author":"admin","twitter_card":"summary_large_image","twitter_misc":{"Written by":"admin","Est. reading time":"5 minutes"},"schema":{"@context":"https:\/\/schema.org","@graph":[{"@type":"WebPage","@id":"https:\/\/golangbyexamples.com\/add-dependency-module-golang\/","url":"https:\/\/golangbyexamples.com\/add-dependency-module-golang\/","name":"Add a dependency to your project or module in Go (Golang) - Welcome To Golang By Example","isPartOf":{"@id":"https:\/\/golangbyexamples.com\/#website"},"datePublished":"2020-11-02T18:39:12+00:00","dateModified":"2020-11-02T18:39:19+00:00","author":{"@id":"https:\/\/golangbyexamples.com\/#\/schema\/person\/8833ea7638dafd763cb1db6c0ca4576f"},"breadcrumb":{"@id":"https:\/\/golangbyexamples.com\/add-dependency-module-golang\/#breadcrumb"},"inLanguage":"en-US","potentialAction":[{"@type":"ReadAction","target":["https:\/\/golangbyexamples.com\/add-dependency-module-golang\/"]}]},{"@type":"BreadcrumbList","@id":"https:\/\/golangbyexamples.com\/add-dependency-module-golang\/#breadcrumb","itemListElement":[{"@type":"ListItem","position":1,"name":"Home","item":"https:\/\/golangbyexamples.com\/"},{"@type":"ListItem","position":2,"name":"Add a dependency to your project or module in Go (Golang)"}]},{"@type":"WebSite","@id":"https:\/\/golangbyexamples.com\/#website","url":"https:\/\/golangbyexamples.com\/","name":"Welcome To Golang By Example","description":"","potentialAction":[{"@type":"SearchAction","target":{"@type":"EntryPoint","urlTemplate":"https:\/\/golangbyexamples.com\/?s={search_term_string}"},"query-input":"required name=search_term_string"}],"inLanguage":"en-US"},{"@type":"Person","@id":"https:\/\/golangbyexamples.com\/#\/schema\/person\/8833ea7638dafd763cb1db6c0ca4576f","name":"admin","image":{"@type":"ImageObject","inLanguage":"en-US","@id":"https:\/\/golangbyexamples.com\/#\/schema\/person\/image\/","url":"https:\/\/secure.gravatar.com\/avatar\/?s=96&d=mm&r=g","contentUrl":"https:\/\/secure.gravatar.com\/avatar\/?s=96&d=mm&r=g","caption":"admin"},"url":"https:\/\/golangbyexamples.com\/author\/admin\/"}]}},"jetpack_featured_media_url":"","jetpack_publicize_connections":[],"jetpack_sharing_enabled":true,"jetpack_shortlink":"https:\/\/wp.me\/paOs1b-176","amp_validity":null,"amp_enabled":true,"_links":{"self":[{"href":"https:\/\/golangbyexamples.com\/wp-json\/wp\/v2\/posts\/4284","targetHints":{"allow":["GET"]}}],"collection":[{"href":"https:\/\/golangbyexamples.com\/wp-json\/wp\/v2\/posts"}],"about":[{"href":"https:\/\/golangbyexamples.com\/wp-json\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"https:\/\/golangbyexamples.com\/wp-json\/wp\/v2\/users\/1"}],"replies":[{"embeddable":true,"href":"https:\/\/golangbyexamples.com\/wp-json\/wp\/v2\/comments?post=4284"}],"version-history":[{"count":2,"href":"https:\/\/golangbyexamples.com\/wp-json\/wp\/v2\/posts\/4284\/revisions"}],"predecessor-version":[{"id":4286,"href":"https:\/\/golangbyexamples.com\/wp-json\/wp\/v2\/posts\/4284\/revisions\/4286"}],"wp:attachment":[{"href":"https:\/\/golangbyexamples.com\/wp-json\/wp\/v2\/media?parent=4284"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"https:\/\/golangbyexamples.com\/wp-json\/wp\/v2\/categories?post=4284"},{"taxonomy":"post_tag","embeddable":true,"href":"https:\/\/golangbyexamples.com\/wp-json\/wp\/v2\/tags?post=4284"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}
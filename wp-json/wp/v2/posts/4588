{"id":4588,"date":"2020-11-30T10:56:36","date_gmt":"2020-11-30T05:26:36","guid":{"rendered":"https:\/\/golangbyexamples.com\/?p=4588"},"modified":"2020-11-30T10:58:18","modified_gmt":"2020-11-30T05:28:18","slug":"header-present-http-golang","status":"publish","type":"post","link":"https:\/\/golangbyexamples.com\/header-present-http-golang\/","title":{"rendered":"Check if a particular header is present in a HTTP request in Go (Golang)"},"content":{"rendered":"\n<div id=\"ez-toc-container\" class=\"ez-toc-v2_0_17 counter-hierarchy counter-decimal ez-toc-light-blue\">\n<div class=\"ez-toc-title-container\">\n<p class=\"ez-toc-title\">Table of Contents<\/p>\n<span class=\"ez-toc-title-toggle\"><a class=\"ez-toc-pull-right ez-toc-btn ez-toc-btn-xs ez-toc-btn-default ez-toc-toggle\" style=\"display: none;\"><i class=\"ez-toc-glyphicon ez-toc-icon-toggle\"><\/i><\/a><\/span><\/div>\n<nav><ul class=\"ez-toc-list ez-toc-list-level-1\"><li class=\"ez-toc-page-1 ez-toc-heading-level-1\"><a class=\"ez-toc-link ez-toc-heading-1\" href=\"https:\/\/golangbyexamples.com\/header-present-http-golang\/#Overview\" title=\"Overview\">Overview<\/a><\/li><\/ul><\/nav><\/div>\n<h1 class=\"wp-block-heading\"><span class=\"ez-toc-section\" id=\"Overview\"><\/span><strong>Overview<\/strong><span class=\"ez-toc-section-end\"><\/span><\/h1>\n\n\n\n<p class=\"has-medium-font-size\">Below is the format in which a Header is represented in go.<\/p>\n\n\n\n<pre class=\"wp-block-prismatic-blocks\"><code class=\"language-go\">type Header map[string][]string<\/code><\/pre>\n\n\n\n<p class=\"has-medium-font-size\">So internally header is a key value map with<\/p>\n\n\n\n<ul class=\"has-medium-font-size wp-block-list\"><li>key being represented in canonical form. Canonical form means that first character and any character following a hyphen is in uppercase. All other characters is in lowercase. Example of canonical forms are<\/li><\/ul>\n\n\n\n<pre class=\"wp-block-prismatic-blocks\"><code class=\"language-go\">Content-Type\nAccept-Encoding<\/code><\/pre>\n\n\n\n<ul class=\"has-medium-font-size wp-block-list\"><li>Value is represented as an array of string. Why array of strings? Because it is perfectly okay to two headers with same key and different values in a request. Both the values will be collected in the array.<\/li><\/ul>\n\n\n\n<p class=\"has-medium-font-size\">For eg if there are below headers in an incoming request<\/p>\n\n\n\n<pre class=\"wp-block-prismatic-blocks\"><code class=\"language-go\">content-type: applcation\/json\nfoo: bar1\nfoo: bar2<\/code><\/pre>\n\n\n\n<p class=\"has-medium-font-size\">Then at server then headers will look like<\/p>\n\n\n\n<pre class=\"wp-block-prismatic-blocks\"><code class=\"language-go\">map[string][]string {\n  \"Content-Type\": {\"application\/json\"},\n  \"Foo\": {\"bar1\" , \"bar2\"}\n}<\/code><\/pre>\n\n\n\n<p class=\"has-medium-font-size\">And since header is a map, we can use the property of a map to check if a particular key is present or not. Below is the format to check if a key exist in the map<\/p>\n\n\n\n<pre class=\"wp-block-prismatic-blocks\"><code class=\"language-go\">val, ok := mapName[key]<\/code><\/pre>\n\n\n\n<p class=\"has-medium-font-size\">There are two cases<\/p>\n\n\n\n<ul class=\"has-medium-font-size wp-block-list\"><li>If the key exists&nbsp;<strong>val&nbsp;<\/strong>variable be the value of the key in the map and&nbsp;<strong>ok&nbsp;<\/strong>variable will be true<\/li><\/ul>\n\n\n\n<ul class=\"has-medium-font-size wp-block-list\"><li>If the key doesn\u2019t exist&nbsp;<strong>val<\/strong>&nbsp;variable will be default zero value of value type and&nbsp;<strong>ok&nbsp;<\/strong>variable will be false<\/li><\/ul>\n\n\n\n<p class=\"has-medium-font-size\">Let&#8217;s see an example<\/p>\n\n\n\n<pre class=\"wp-block-prismatic-blocks\"><code class=\"language-go\">package main\n\nimport (\n    \"fmt\"\n    \"net\/http\"\n)\n\nfunc main() {\n    handler := http.HandlerFunc(handleRequest)\n    http.Handle(\"\/example\", handler)\n    http.ListenAndServe(\":8080\", nil)\n}\n\nfunc handleRequest(w http.ResponseWriter, r *http.Request) {\n    headers := r.Header\n    val, ok := headers[\"Content-Type\"]\n    if ok {\n        fmt.Printf(\"Content-Type key header is present with value %s\\n\", val)\n    } else {\n        fmt.Println(\"Content-Type key header is not present\")\n    }\n    val, ok = headers[\"someKey\"]\n    if ok {\n        fmt.Printf(\"someKey key header is present with value %s\\n\", val)\n    } else {\n        fmt.Println(\"someKey key header is not present\")\n    }\n}<\/code><\/pre>\n\n\n\n<p class=\"has-medium-font-size\">In above program we started a server which is listening on port 8080. We also defined a URL on that endpoint. Run this server and make the below API call.<\/p>\n\n\n\n<pre class=\"wp-block-prismatic-blocks\"><code class=\"language-go\">curl -v -X POST http:\/\/localhost:8080\/example -H \"content-type: application\/json\" <\/code><\/pre>\n\n\n\n<p class=\"has-medium-font-size\">After running this API check the output in the terminal. It will output. You can check the output. content-type header is present hence it outputs its value. someKey header is not present hence it prints that is no present. Also note that while accessing the header map we need to enter the key in the canonical form only. For example even though the supplied header in the curl is<\/p>\n\n\n\n<pre class=\"wp-block-prismatic-blocks\"><code class=\"language-go\">content-type<\/code><\/pre>\n\n\n\n<p class=\"has-medium-font-size\">but while accessing the header map in the code we do like below i.e using key in canonical form <strong>Content-Type<\/strong><\/p>\n\n\n\n<pre class=\"wp-block-prismatic-blocks\"><code class=\"language-go\">val, ok := headers[\"Content-Type\"]<\/code><\/pre>\n\n\n\n<p class=\"has-medium-font-size\">In case we only want to check if a key is present and val is not needed, then blank identifier i.e \u201c_\u201d can be used in place of val.<\/p>\n\n\n\n<pre class=\"wp-block-prismatic-blocks\"><code class=\"language-go\">_, ok = employeeSalary[\"Sam\"]<\/code><\/pre>\n","protected":false},"excerpt":{"rendered":"<p>Table of Contents Overview Overview Below is the format in which a Header is represented in go. So internally header is a key value map with key being represented in canonical form&#8230;.<\/p>\n","protected":false},"author":1,"featured_media":0,"comment_status":"open","ping_status":"open","sticky":false,"template":"","format":"standard","meta":{"spay_email":"","footnotes":"","jetpack_publicize_message":"","jetpack_is_tweetstorm":false},"categories":[1],"tags":[3,4],"class_list":["post-4588","post","type-post","status-publish","format-standard","hentry","category-tech","tag-go","tag-golang"],"yoast_head":"<!-- This site is optimized with the Yoast SEO plugin v22.7 - https:\/\/yoast.com\/wordpress\/plugins\/seo\/ -->\n<title>Check if a particular header is present in a HTTP request in Go (Golang) - Welcome To Golang By Example<\/title>\n<meta name=\"robots\" content=\"index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1\" \/>\n<link rel=\"canonical\" href=\"https:\/\/golangbyexamples.com\/header-present-http-golang\/\" \/>\n<meta property=\"og:locale\" content=\"en_US\" \/>\n<meta property=\"og:type\" content=\"article\" \/>\n<meta property=\"og:title\" content=\"Check if a particular header is present in a HTTP request in Go (Golang) - Welcome To Golang By Example\" \/>\n<meta property=\"og:description\" content=\"Table of Contents Overview Overview Below is the format in which a Header is represented in go. So internally header is a key value map with key being represented in canonical form....\" \/>\n<meta property=\"og:url\" content=\"https:\/\/golangbyexamples.com\/header-present-http-golang\/\" \/>\n<meta property=\"og:site_name\" content=\"Welcome To Golang By Example\" \/>\n<meta property=\"article:published_time\" content=\"2020-11-30T05:26:36+00:00\" \/>\n<meta property=\"article:modified_time\" content=\"2020-11-30T05:28:18+00:00\" \/>\n<meta name=\"author\" content=\"admin\" \/>\n<meta name=\"twitter:card\" content=\"summary_large_image\" \/>\n<meta name=\"twitter:label1\" content=\"Written by\" \/>\n\t<meta name=\"twitter:data1\" content=\"admin\" \/>\n\t<meta name=\"twitter:label2\" content=\"Est. reading time\" \/>\n\t<meta name=\"twitter:data2\" content=\"2 minutes\" \/>\n<script type=\"application\/ld+json\" class=\"yoast-schema-graph\">{\"@context\":\"https:\/\/schema.org\",\"@graph\":[{\"@type\":\"WebPage\",\"@id\":\"https:\/\/golangbyexamples.com\/header-present-http-golang\/\",\"url\":\"https:\/\/golangbyexamples.com\/header-present-http-golang\/\",\"name\":\"Check if a particular header is present in a HTTP request in Go (Golang) - Welcome To Golang By Example\",\"isPartOf\":{\"@id\":\"https:\/\/golangbyexamples.com\/#website\"},\"datePublished\":\"2020-11-30T05:26:36+00:00\",\"dateModified\":\"2020-11-30T05:28:18+00:00\",\"author\":{\"@id\":\"https:\/\/golangbyexamples.com\/#\/schema\/person\/8833ea7638dafd763cb1db6c0ca4576f\"},\"breadcrumb\":{\"@id\":\"https:\/\/golangbyexamples.com\/header-present-http-golang\/#breadcrumb\"},\"inLanguage\":\"en-US\",\"potentialAction\":[{\"@type\":\"ReadAction\",\"target\":[\"https:\/\/golangbyexamples.com\/header-present-http-golang\/\"]}]},{\"@type\":\"BreadcrumbList\",\"@id\":\"https:\/\/golangbyexamples.com\/header-present-http-golang\/#breadcrumb\",\"itemListElement\":[{\"@type\":\"ListItem\",\"position\":1,\"name\":\"Home\",\"item\":\"https:\/\/golangbyexamples.com\/\"},{\"@type\":\"ListItem\",\"position\":2,\"name\":\"Check if a particular header is present in a HTTP request in Go (Golang)\"}]},{\"@type\":\"WebSite\",\"@id\":\"https:\/\/golangbyexamples.com\/#website\",\"url\":\"https:\/\/golangbyexamples.com\/\",\"name\":\"Welcome To Golang By Example\",\"description\":\"\",\"potentialAction\":[{\"@type\":\"SearchAction\",\"target\":{\"@type\":\"EntryPoint\",\"urlTemplate\":\"https:\/\/golangbyexamples.com\/?s={search_term_string}\"},\"query-input\":\"required name=search_term_string\"}],\"inLanguage\":\"en-US\"},{\"@type\":\"Person\",\"@id\":\"https:\/\/golangbyexamples.com\/#\/schema\/person\/8833ea7638dafd763cb1db6c0ca4576f\",\"name\":\"admin\",\"image\":{\"@type\":\"ImageObject\",\"inLanguage\":\"en-US\",\"@id\":\"https:\/\/golangbyexamples.com\/#\/schema\/person\/image\/\",\"url\":\"https:\/\/secure.gravatar.com\/avatar\/?s=96&d=mm&r=g\",\"contentUrl\":\"https:\/\/secure.gravatar.com\/avatar\/?s=96&d=mm&r=g\",\"caption\":\"admin\"},\"url\":\"https:\/\/golangbyexamples.com\/author\/admin\/\"}]}<\/script>\n<!-- \/ Yoast SEO plugin. -->","yoast_head_json":{"title":"Check if a particular header is present in a HTTP request in Go (Golang) - Welcome To Golang By Example","robots":{"index":"index","follow":"follow","max-snippet":"max-snippet:-1","max-image-preview":"max-image-preview:large","max-video-preview":"max-video-preview:-1"},"canonical":"https:\/\/golangbyexamples.com\/header-present-http-golang\/","og_locale":"en_US","og_type":"article","og_title":"Check if a particular header is present in a HTTP request in Go (Golang) - Welcome To Golang By Example","og_description":"Table of Contents Overview Overview Below is the format in which a Header is represented in go. So internally header is a key value map with key being represented in canonical form....","og_url":"https:\/\/golangbyexamples.com\/header-present-http-golang\/","og_site_name":"Welcome To Golang By Example","article_published_time":"2020-11-30T05:26:36+00:00","article_modified_time":"2020-11-30T05:28:18+00:00","author":"admin","twitter_card":"summary_large_image","twitter_misc":{"Written by":"admin","Est. reading time":"2 minutes"},"schema":{"@context":"https:\/\/schema.org","@graph":[{"@type":"WebPage","@id":"https:\/\/golangbyexamples.com\/header-present-http-golang\/","url":"https:\/\/golangbyexamples.com\/header-present-http-golang\/","name":"Check if a particular header is present in a HTTP request in Go (Golang) - Welcome To Golang By Example","isPartOf":{"@id":"https:\/\/golangbyexamples.com\/#website"},"datePublished":"2020-11-30T05:26:36+00:00","dateModified":"2020-11-30T05:28:18+00:00","author":{"@id":"https:\/\/golangbyexamples.com\/#\/schema\/person\/8833ea7638dafd763cb1db6c0ca4576f"},"breadcrumb":{"@id":"https:\/\/golangbyexamples.com\/header-present-http-golang\/#breadcrumb"},"inLanguage":"en-US","potentialAction":[{"@type":"ReadAction","target":["https:\/\/golangbyexamples.com\/header-present-http-golang\/"]}]},{"@type":"BreadcrumbList","@id":"https:\/\/golangbyexamples.com\/header-present-http-golang\/#breadcrumb","itemListElement":[{"@type":"ListItem","position":1,"name":"Home","item":"https:\/\/golangbyexamples.com\/"},{"@type":"ListItem","position":2,"name":"Check if a particular header is present in a HTTP request in Go (Golang)"}]},{"@type":"WebSite","@id":"https:\/\/golangbyexamples.com\/#website","url":"https:\/\/golangbyexamples.com\/","name":"Welcome To Golang By Example","description":"","potentialAction":[{"@type":"SearchAction","target":{"@type":"EntryPoint","urlTemplate":"https:\/\/golangbyexamples.com\/?s={search_term_string}"},"query-input":"required name=search_term_string"}],"inLanguage":"en-US"},{"@type":"Person","@id":"https:\/\/golangbyexamples.com\/#\/schema\/person\/8833ea7638dafd763cb1db6c0ca4576f","name":"admin","image":{"@type":"ImageObject","inLanguage":"en-US","@id":"https:\/\/golangbyexamples.com\/#\/schema\/person\/image\/","url":"https:\/\/secure.gravatar.com\/avatar\/?s=96&d=mm&r=g","contentUrl":"https:\/\/secure.gravatar.com\/avatar\/?s=96&d=mm&r=g","caption":"admin"},"url":"https:\/\/golangbyexamples.com\/author\/admin\/"}]}},"jetpack_featured_media_url":"","jetpack_publicize_connections":[],"jetpack_sharing_enabled":true,"jetpack_shortlink":"https:\/\/wp.me\/paOs1b-1c0","amp_validity":null,"amp_enabled":true,"_links":{"self":[{"href":"https:\/\/golangbyexamples.com\/wp-json\/wp\/v2\/posts\/4588","targetHints":{"allow":["GET"]}}],"collection":[{"href":"https:\/\/golangbyexamples.com\/wp-json\/wp\/v2\/posts"}],"about":[{"href":"https:\/\/golangbyexamples.com\/wp-json\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"https:\/\/golangbyexamples.com\/wp-json\/wp\/v2\/users\/1"}],"replies":[{"embeddable":true,"href":"https:\/\/golangbyexamples.com\/wp-json\/wp\/v2\/comments?post=4588"}],"version-history":[{"count":3,"href":"https:\/\/golangbyexamples.com\/wp-json\/wp\/v2\/posts\/4588\/revisions"}],"predecessor-version":[{"id":4592,"href":"https:\/\/golangbyexamples.com\/wp-json\/wp\/v2\/posts\/4588\/revisions\/4592"}],"wp:attachment":[{"href":"https:\/\/golangbyexamples.com\/wp-json\/wp\/v2\/media?parent=4588"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"https:\/\/golangbyexamples.com\/wp-json\/wp\/v2\/categories?post=4588"},{"taxonomy":"post_tag","embeddable":true,"href":"https:\/\/golangbyexamples.com\/wp-json\/wp\/v2\/tags?post=4588"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}
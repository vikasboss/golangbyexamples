{"id":5190,"date":"2021-03-02T01:11:33","date_gmt":"2021-03-01T19:41:33","guid":{"rendered":"https:\/\/golangbyexamples.com\/?p=5190"},"modified":"2021-03-02T01:17:08","modified_gmt":"2021-03-01T19:47:08","slug":"validate-range-http-body-golang","status":"publish","type":"post","link":"https:\/\/golangbyexamples.com\/validate-range-http-body-golang\/","title":{"rendered":"Validate the range of the integer in an HTTP request body in Go (Golang)"},"content":{"rendered":"\n<div id=\"ez-toc-container\" class=\"ez-toc-v2_0_17 counter-hierarchy counter-decimal ez-toc-light-blue\">\n<div class=\"ez-toc-title-container\">\n<p class=\"ez-toc-title\">Table of Contents<\/p>\n<span class=\"ez-toc-title-toggle\"><a class=\"ez-toc-pull-right ez-toc-btn ez-toc-btn-xs ez-toc-btn-default ez-toc-toggle\" style=\"display: none;\"><i class=\"ez-toc-glyphicon ez-toc-icon-toggle\"><\/i><\/a><\/span><\/div>\n<nav><ul class=\"ez-toc-list ez-toc-list-level-1\"><li class=\"ez-toc-page-1 ez-toc-heading-level-1\"><a class=\"ez-toc-link ez-toc-heading-1\" href=\"https:\/\/golangbyexamples.com\/validate-range-http-body-golang\/#Overview\" title=\"Overview\">Overview<\/a><\/li><li class=\"ez-toc-page-1 ez-toc-heading-level-1\"><a class=\"ez-toc-link ez-toc-heading-2\" href=\"https:\/\/golangbyexamples.com\/validate-range-http-body-golang\/#Program\" title=\"Program\">Program<\/a><\/li><\/ul><\/nav><\/div>\n<h1 class=\"wp-block-heading\"><span class=\"ez-toc-section\" id=\"Overview\"><\/span><strong>Overview<\/strong><span class=\"ez-toc-section-end\"><\/span><\/h1>\n\n\n\n<p class=\"has-medium-font-size\">The below library can be used to validate the range of an integer in an incoming JSON HTTP request body<\/p>\n\n\n\n<ul class=\"has-medium-font-size wp-block-list\"><li><strong>gopkg.in\/go-playground\/validator.v9<\/strong> &#8211; <a href=\"https:\/\/pkg.go.dev\/github.com\/go-playground\/validator\">https:\/\/pkg.go.dev\/github.com\/go-playground\/validator<\/a><\/li><\/ul>\n\n\n\n<p class=\"has-medium-font-size\">For this tutorial, we will try to parse the incoming JSON request body into the below employee struct<\/p>\n\n\n\n<pre class=\"wp-block-prismatic-blocks\"><code class=\"language-go\">type employee struct {\n    Age int `validate:\"required,gte=10,lte=20\"`\n}<\/code><\/pre>\n\n\n\n<p class=\"has-medium-font-size\">Notice here that we need to associate meta tags with fields of the struct to let the validator know that you want to validate this field. In the above example, we added the tag with the Age field. This tag is interpreted by the playground validate library. Notice we added three validations for the <strong>Age<\/strong> field<\/p>\n\n\n\n<ul class=\"has-medium-font-size wp-block-list\"><li><strong>required<\/strong> &#8211; validates that the field is present<\/li><\/ul>\n\n\n\n<ul class=\"has-medium-font-size wp-block-list\"><li><strong>gte<\/strong> &#8211; validate that the field value is greater than equal to a particular value<\/li><\/ul>\n\n\n\n<ul class=\"has-medium-font-size wp-block-list\"><li><strong>lte<\/strong> &#8211; validate that the field value is less than equal to a particular value<\/li><\/ul>\n\n\n\n<h1 class=\"wp-block-heading\"><span class=\"ez-toc-section\" id=\"Program\"><\/span><strong>Program<\/strong><span class=\"ez-toc-section-end\"><\/span><\/h1>\n\n\n\n<pre class=\"wp-block-prismatic-blocks\"><code class=\"language-go\">package main\nimport (\n    \"encoding\/json\"\n    \"net\/http\"\n    \"github.com\/go-playground\/validator\"\n)\nvar validate *validator.Validate\ntype employee struct {\n    Age int `validate:\"required,gte=10,lte=20\"`\n}\nfunc main() {\n    createEmployeeHanlder := http.HandlerFunc(createEmployee)\n    http.Handle(\"\/employee\", createEmployeeHanlder)\n    http.ListenAndServe(\":8080\", nil)\n}\nfunc createEmployee(w http.ResponseWriter, r *http.Request) {\n    headerContentTtype := r.Header.Get(\"Content-Type\")\n    if headerContentTtype != \"application\/json\" {\n        errorResponse(w, \"Content Type is not application\/json\", http.StatusUnsupportedMediaType)\n        return\n    }\n    var e employee\n    decoder := json.NewDecoder(r.Body)\n    err := decoder.Decode(&e)\n    if err != nil {\n        errorResponse(w, \"Bad Request \"+err.Error(), http.StatusBadRequest)\n    }\n    err = validateStruct(e)\n    if err != nil {\n        errorResponse(w, \"Bad Request \"+err.Error(), http.StatusBadRequest)\n    }\n    errorResponse(w, \"Success\", http.StatusOK)\n    return\n}\nfunc errorResponse(w http.ResponseWriter, message string, httpStatusCode int) {\n    w.Header().Set(\"Content-Type\", \"application\/json\")\n    w.WriteHeader(httpStatusCode)\n    resp := make(map[string]string)\n    resp[\"message\"] = message\n    jsonResp, _ := json.Marshal(resp)\n    w.Write(jsonResp)\n}\nfunc validateStruct(e employee) error {\n    validate = validator.New()\n    err := validate.Struct(e)\n    if err != nil {\n        return err\n    }\n    return nil\n}<\/code><\/pre>\n\n\n\n<p class=\"has-medium-font-size\">Run the program. <\/p>\n\n\n\n<pre class=\"wp-block-prismatic-blocks\"><code class=\"language-go\">go run main.go<\/code><\/pre>\n\n\n\n<p class=\"has-medium-font-size\">It will start an HTTP server listening on port 8080. Now make some curl API calls<\/p>\n\n\n\n<ul class=\"has-medium-font-size wp-block-list\"><li>Below curl call<\/li><\/ul>\n\n\n\n<pre class=\"wp-block-prismatic-blocks\"><code class=\"language-go\">curl  -X POST -H \"content-type: application\/json\" http:\/\/localhost:8080\/employee -d '{\"Age\": 5}'<\/code><\/pre>\n\n\n\n<p class=\"has-medium-font-size\">gives below response as 5 is less than the minimum which is 10<\/p>\n\n\n\n<pre class=\"wp-block-prismatic-blocks\"><code class=\"language-go\">{\"message\":\"Bad Request Key: 'employee.Age' Error:Field validation for 'Age' failed on the 'gte' tag\"}<\/code><\/pre>\n\n\n\n<ul class=\"has-medium-font-size wp-block-list\"><li>Below curl call<\/li><\/ul>\n\n\n\n<pre class=\"wp-block-prismatic-blocks\"><code class=\"language-go\">curl  -X POST -H \"content-type: application\/json\" http:\/\/localhost:8080\/employee -d '{\"Age\": 10}'<\/code><\/pre>\n\n\n\n<p class=\"has-medium-font-size\">gives below response as 10 is greater than the maximum which is 20<\/p>\n\n\n\n<pre class=\"wp-block-prismatic-blocks\"><code class=\"language-go\">{\"message\":\"Bad Request Key: 'employee.Age' Error:Field validation for 'Age' failed on the 'lte' tag\"}<\/code><\/pre>\n\n\n\n<ul class=\"has-medium-font-size wp-block-list\"><li>Below curl call<\/li><\/ul>\n\n\n\n<pre class=\"wp-block-prismatic-blocks\"><code class=\"language-go\">curl  -X POST -H \"content-type: application\/json\" http:\/\/localhost:8080\/employee -d '{\"Age\": 15}'<\/code><\/pre>\n\n\n\n<p class=\"has-medium-font-size\">gives response as success as 15 is greater than 10 and less than 20.<\/p>\n\n\n\n<pre class=\"wp-block-prismatic-blocks\"><code class=\"language-go\">{\"message\":\"Success\"}<\/code><\/pre>\n","protected":false},"excerpt":{"rendered":"<p>Table of Contents OverviewProgram Overview The below library can be used to validate the range of an integer in an incoming JSON HTTP request body gopkg.in\/go-playground\/validator.v9 &#8211; https:\/\/pkg.go.dev\/github.com\/go-playground\/validator For this tutorial, we&#8230;<\/p>\n","protected":false},"author":1,"featured_media":0,"comment_status":"open","ping_status":"open","sticky":false,"template":"","format":"standard","meta":{"spay_email":"","footnotes":"","jetpack_publicize_message":"","jetpack_is_tweetstorm":false},"categories":[1],"tags":[],"class_list":["post-5190","post","type-post","status-publish","format-standard","hentry","category-tech"],"yoast_head":"<!-- This site is optimized with the Yoast SEO plugin v22.7 - https:\/\/yoast.com\/wordpress\/plugins\/seo\/ -->\n<title>Validate the range of the integer in an HTTP request body in Go (Golang) - Welcome To Golang By Example<\/title>\n<meta name=\"robots\" content=\"index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1\" \/>\n<link rel=\"canonical\" href=\"https:\/\/golangbyexamples.com\/validate-range-http-body-golang\/\" \/>\n<meta property=\"og:locale\" content=\"en_US\" \/>\n<meta property=\"og:type\" content=\"article\" \/>\n<meta property=\"og:title\" content=\"Validate the range of the integer in an HTTP request body in Go (Golang) - Welcome To Golang By Example\" \/>\n<meta property=\"og:description\" content=\"Table of Contents OverviewProgram Overview The below library can be used to validate the range of an integer in an incoming JSON HTTP request body gopkg.in\/go-playground\/validator.v9 &#8211; https:\/\/pkg.go.dev\/github.com\/go-playground\/validator For this tutorial, we...\" \/>\n<meta property=\"og:url\" content=\"https:\/\/golangbyexamples.com\/validate-range-http-body-golang\/\" \/>\n<meta property=\"og:site_name\" content=\"Welcome To Golang By Example\" \/>\n<meta property=\"article:published_time\" content=\"2021-03-01T19:41:33+00:00\" \/>\n<meta property=\"article:modified_time\" content=\"2021-03-01T19:47:08+00:00\" \/>\n<meta name=\"author\" content=\"admin\" \/>\n<meta name=\"twitter:card\" content=\"summary_large_image\" \/>\n<meta name=\"twitter:label1\" content=\"Written by\" \/>\n\t<meta name=\"twitter:data1\" content=\"admin\" \/>\n\t<meta name=\"twitter:label2\" content=\"Est. reading time\" \/>\n\t<meta name=\"twitter:data2\" content=\"2 minutes\" \/>\n<script type=\"application\/ld+json\" class=\"yoast-schema-graph\">{\"@context\":\"https:\/\/schema.org\",\"@graph\":[{\"@type\":\"WebPage\",\"@id\":\"https:\/\/golangbyexamples.com\/validate-range-http-body-golang\/\",\"url\":\"https:\/\/golangbyexamples.com\/validate-range-http-body-golang\/\",\"name\":\"Validate the range of the integer in an HTTP request body in Go (Golang) - Welcome To Golang By Example\",\"isPartOf\":{\"@id\":\"https:\/\/golangbyexamples.com\/#website\"},\"datePublished\":\"2021-03-01T19:41:33+00:00\",\"dateModified\":\"2021-03-01T19:47:08+00:00\",\"author\":{\"@id\":\"https:\/\/golangbyexamples.com\/#\/schema\/person\/8833ea7638dafd763cb1db6c0ca4576f\"},\"breadcrumb\":{\"@id\":\"https:\/\/golangbyexamples.com\/validate-range-http-body-golang\/#breadcrumb\"},\"inLanguage\":\"en-US\",\"potentialAction\":[{\"@type\":\"ReadAction\",\"target\":[\"https:\/\/golangbyexamples.com\/validate-range-http-body-golang\/\"]}]},{\"@type\":\"BreadcrumbList\",\"@id\":\"https:\/\/golangbyexamples.com\/validate-range-http-body-golang\/#breadcrumb\",\"itemListElement\":[{\"@type\":\"ListItem\",\"position\":1,\"name\":\"Home\",\"item\":\"https:\/\/golangbyexamples.com\/\"},{\"@type\":\"ListItem\",\"position\":2,\"name\":\"Validate the range of the integer in an HTTP request body in Go (Golang)\"}]},{\"@type\":\"WebSite\",\"@id\":\"https:\/\/golangbyexamples.com\/#website\",\"url\":\"https:\/\/golangbyexamples.com\/\",\"name\":\"Welcome To Golang By Example\",\"description\":\"\",\"potentialAction\":[{\"@type\":\"SearchAction\",\"target\":{\"@type\":\"EntryPoint\",\"urlTemplate\":\"https:\/\/golangbyexamples.com\/?s={search_term_string}\"},\"query-input\":\"required name=search_term_string\"}],\"inLanguage\":\"en-US\"},{\"@type\":\"Person\",\"@id\":\"https:\/\/golangbyexamples.com\/#\/schema\/person\/8833ea7638dafd763cb1db6c0ca4576f\",\"name\":\"admin\",\"image\":{\"@type\":\"ImageObject\",\"inLanguage\":\"en-US\",\"@id\":\"https:\/\/golangbyexamples.com\/#\/schema\/person\/image\/\",\"url\":\"https:\/\/secure.gravatar.com\/avatar\/?s=96&d=mm&r=g\",\"contentUrl\":\"https:\/\/secure.gravatar.com\/avatar\/?s=96&d=mm&r=g\",\"caption\":\"admin\"},\"url\":\"https:\/\/golangbyexamples.com\/author\/admin\/\"}]}<\/script>\n<!-- \/ Yoast SEO plugin. -->","yoast_head_json":{"title":"Validate the range of the integer in an HTTP request body in Go (Golang) - Welcome To Golang By Example","robots":{"index":"index","follow":"follow","max-snippet":"max-snippet:-1","max-image-preview":"max-image-preview:large","max-video-preview":"max-video-preview:-1"},"canonical":"https:\/\/golangbyexamples.com\/validate-range-http-body-golang\/","og_locale":"en_US","og_type":"article","og_title":"Validate the range of the integer in an HTTP request body in Go (Golang) - Welcome To Golang By Example","og_description":"Table of Contents OverviewProgram Overview The below library can be used to validate the range of an integer in an incoming JSON HTTP request body gopkg.in\/go-playground\/validator.v9 &#8211; https:\/\/pkg.go.dev\/github.com\/go-playground\/validator For this tutorial, we...","og_url":"https:\/\/golangbyexamples.com\/validate-range-http-body-golang\/","og_site_name":"Welcome To Golang By Example","article_published_time":"2021-03-01T19:41:33+00:00","article_modified_time":"2021-03-01T19:47:08+00:00","author":"admin","twitter_card":"summary_large_image","twitter_misc":{"Written by":"admin","Est. reading time":"2 minutes"},"schema":{"@context":"https:\/\/schema.org","@graph":[{"@type":"WebPage","@id":"https:\/\/golangbyexamples.com\/validate-range-http-body-golang\/","url":"https:\/\/golangbyexamples.com\/validate-range-http-body-golang\/","name":"Validate the range of the integer in an HTTP request body in Go (Golang) - Welcome To Golang By Example","isPartOf":{"@id":"https:\/\/golangbyexamples.com\/#website"},"datePublished":"2021-03-01T19:41:33+00:00","dateModified":"2021-03-01T19:47:08+00:00","author":{"@id":"https:\/\/golangbyexamples.com\/#\/schema\/person\/8833ea7638dafd763cb1db6c0ca4576f"},"breadcrumb":{"@id":"https:\/\/golangbyexamples.com\/validate-range-http-body-golang\/#breadcrumb"},"inLanguage":"en-US","potentialAction":[{"@type":"ReadAction","target":["https:\/\/golangbyexamples.com\/validate-range-http-body-golang\/"]}]},{"@type":"BreadcrumbList","@id":"https:\/\/golangbyexamples.com\/validate-range-http-body-golang\/#breadcrumb","itemListElement":[{"@type":"ListItem","position":1,"name":"Home","item":"https:\/\/golangbyexamples.com\/"},{"@type":"ListItem","position":2,"name":"Validate the range of the integer in an HTTP request body in Go (Golang)"}]},{"@type":"WebSite","@id":"https:\/\/golangbyexamples.com\/#website","url":"https:\/\/golangbyexamples.com\/","name":"Welcome To Golang By Example","description":"","potentialAction":[{"@type":"SearchAction","target":{"@type":"EntryPoint","urlTemplate":"https:\/\/golangbyexamples.com\/?s={search_term_string}"},"query-input":"required name=search_term_string"}],"inLanguage":"en-US"},{"@type":"Person","@id":"https:\/\/golangbyexamples.com\/#\/schema\/person\/8833ea7638dafd763cb1db6c0ca4576f","name":"admin","image":{"@type":"ImageObject","inLanguage":"en-US","@id":"https:\/\/golangbyexamples.com\/#\/schema\/person\/image\/","url":"https:\/\/secure.gravatar.com\/avatar\/?s=96&d=mm&r=g","contentUrl":"https:\/\/secure.gravatar.com\/avatar\/?s=96&d=mm&r=g","caption":"admin"},"url":"https:\/\/golangbyexamples.com\/author\/admin\/"}]}},"jetpack_featured_media_url":"","jetpack_publicize_connections":[],"jetpack_sharing_enabled":true,"jetpack_shortlink":"https:\/\/wp.me\/paOs1b-1lI","amp_validity":null,"amp_enabled":true,"_links":{"self":[{"href":"https:\/\/golangbyexamples.com\/wp-json\/wp\/v2\/posts\/5190","targetHints":{"allow":["GET"]}}],"collection":[{"href":"https:\/\/golangbyexamples.com\/wp-json\/wp\/v2\/posts"}],"about":[{"href":"https:\/\/golangbyexamples.com\/wp-json\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"https:\/\/golangbyexamples.com\/wp-json\/wp\/v2\/users\/1"}],"replies":[{"embeddable":true,"href":"https:\/\/golangbyexamples.com\/wp-json\/wp\/v2\/comments?post=5190"}],"version-history":[{"count":2,"href":"https:\/\/golangbyexamples.com\/wp-json\/wp\/v2\/posts\/5190\/revisions"}],"predecessor-version":[{"id":5194,"href":"https:\/\/golangbyexamples.com\/wp-json\/wp\/v2\/posts\/5190\/revisions\/5194"}],"wp:attachment":[{"href":"https:\/\/golangbyexamples.com\/wp-json\/wp\/v2\/media?parent=5190"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"https:\/\/golangbyexamples.com\/wp-json\/wp\/v2\/categories?post=5190"},{"taxonomy":"post_tag","embeddable":true,"href":"https:\/\/golangbyexamples.com\/wp-json\/wp\/v2\/tags?post=5190"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}
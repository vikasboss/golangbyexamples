{"id":3998,"date":"2020-09-20T22:56:34","date_gmt":"2020-09-20T17:26:34","guid":{"rendered":"https:\/\/golangbyexamples.com\/?p=3998"},"modified":"2020-09-20T22:56:46","modified_gmt":"2020-09-20T17:26:46","slug":"recover-panic-goroutine-go","status":"publish","type":"post","link":"https:\/\/golangbyexamples.com\/recover-panic-goroutine-go\/","title":{"rendered":"Recover panic from goroutine in Go (Golang)"},"content":{"rendered":"\n<div id=\"ez-toc-container\" class=\"ez-toc-v2_0_17 counter-hierarchy counter-decimal ez-toc-light-blue\">\n<div class=\"ez-toc-title-container\">\n<p class=\"ez-toc-title\">Table of Contents<\/p>\n<span class=\"ez-toc-title-toggle\"><a class=\"ez-toc-pull-right ez-toc-btn ez-toc-btn-xs ez-toc-btn-default ez-toc-toggle\" style=\"display: none;\"><i class=\"ez-toc-glyphicon ez-toc-icon-toggle\"><\/i><\/a><\/span><\/div>\n<nav><ul class=\"ez-toc-list ez-toc-list-level-1\"><li class=\"ez-toc-page-1 ez-toc-heading-level-1\"><a class=\"ez-toc-link ez-toc-heading-1\" href=\"https:\/\/golangbyexamples.com\/recover-panic-goroutine-go\/#Overview\" title=\"Overview\">Overview<\/a><\/li><li class=\"ez-toc-page-1 ez-toc-heading-level-1\"><a class=\"ez-toc-link ez-toc-heading-2\" href=\"https:\/\/golangbyexamples.com\/recover-panic-goroutine-go\/#Recover_function_in_the_same_goroutine_as_panic\" title=\"Recover function in the same goroutine as panic\">Recover function in the same goroutine as panic<\/a><\/li><li class=\"ez-toc-page-1 ez-toc-heading-level-1\"><a class=\"ez-toc-link ez-toc-heading-3\" href=\"https:\/\/golangbyexamples.com\/recover-panic-goroutine-go\/#Recover_function_in_a_different_goroutine_as_panic\" title=\"Recover function in a different goroutine as panic\">Recover function in a different goroutine as panic<\/a><\/li><\/ul><\/nav><\/div>\n<h1 class=\"wp-block-heading\"><span class=\"ez-toc-section\" id=\"Overview\"><\/span><strong>Overview<\/strong><span class=\"ez-toc-section-end\"><\/span><\/h1>\n\n\n\n<p class=\"has-medium-font-size\">There are two cases for recovering from a panic in a goroutine<\/p>\n\n\n\n<ul class=\"has-medium-font-size wp-block-list\"><li><strong>recover<\/strong> function in the same goroutine as <strong>panic<\/strong><\/li><\/ul>\n\n\n\n<ul class=\"has-medium-font-size wp-block-list\"><li><strong>recover<\/strong> function in a different goroutine as <strong>panic<\/strong><\/li><\/ul>\n\n\n\n<p class=\"has-medium-font-size\">While in the first case it will recover from panic. But an important point to note about recover function is that it can only recover the panic happening in the same goroutine.\u00a0 If the panic is happening in\u00a0a different goroutine and recover\u00a0is in a different goroutine then it.<\/p>\n\n\n\n<p class=\"has-medium-font-size\">Let&#8217;s see an example for both<\/p>\n\n\n\n<h1 class=\"wp-block-heading\"><span class=\"ez-toc-section\" id=\"Recover_function_in_the_same_goroutine_as_panic\"><\/span><strong><strong>Recover function in the same goroutine as panic<\/strong><\/strong><span class=\"ez-toc-section-end\"><\/span><\/h1>\n\n\n\n<pre class=\"wp-block-prismatic-blocks\"><code class=\"language-go\">package main\n\nimport \"fmt\"\n\nfunc main() {\n    a := []string{\"a\", \"b\"}\n    go checkAndPrintWithRecover(a, 2)\n    fmt.Println(\"Exiting normally\")\n}\n\nfunc checkAndPrintWithRecover(a []string, index int) {\n    defer handleOutOfBounds()\n    checkAndPrint(a, 2)\n}\n\nfunc checkAndPrint(a []string, index int) {\n    if index > (len(a) - 1) {\n        panic(\"Out of bound access for slice\")\n    }\n    fmt.Println(a[index])\n}\n\nfunc handleOutOfBounds() {\n    if r := recover(); r != nil {\n        fmt.Println(\"Recovering from panic:\", r)\n    }\n}<\/code><\/pre>\n\n\n\n<p class=\"has-medium-font-size\"><strong>Output<\/strong><\/p>\n\n\n\n<pre class=\"wp-block-prismatic-blocks\"><code class=\"language-\">Exiting normally\nRecovering from panic: Out of bound access for slice<\/code><\/pre>\n\n\n\n<p>In the above program <strong>recover<\/strong> and <strong>panic<\/strong> lie in the same goroutine hence it is able to recover from panic as seen from the output.<\/p>\n\n\n\n<h1 class=\"wp-block-heading\"><span class=\"ez-toc-section\" id=\"Recover_function_in_a_different_goroutine_as_panic\"><\/span><strong>Recover function in a different goroutine as panic<\/strong><span class=\"ez-toc-section-end\"><\/span><\/h1>\n\n\n\n<p class=\"has-medium-font-size\">As mentioned in this case it is not possible to recover from panic.<\/p>\n\n\n\n<pre class=\"wp-block-prismatic-blocks\"><code class=\"language-go\">package main\nimport \"fmt\"\nfunc main() {\n    a := []string{\"a\", \"b\"}\n    checkAndPrintWithRecover(a, 2)\n    fmt.Println(\"Exiting normally\")\n}\nfunc checkAndPrintWithRecover(a []string, index int) {\n    defer handleOutOfBounds()\n    go checkAndPrint(a, 2)\n}\nfunc checkAndPrint(a []string, index int) {\n    if index > (len(a) - 1) {\n        panic(\"Out of bound access for slice\")\n    }\n    fmt.Println(a[index])\n}\nfunc handleOutOfBounds() {\n    if r := recover(); r != nil {\n        fmt.Println(\"Recovering from panic:\", r)\n    }\n}<\/code><\/pre>\n\n\n\n<p class=\"has-medium-font-size\"><strong>Output<\/strong><\/p>\n\n\n\n<pre class=\"wp-block-prismatic-blocks\"><code class=\"language-go\">Exiting normally\npanic: Out of bound access for slice\n\ngoroutine 18 [running]:\nmain.checkAndPrint(0xc0000a6020, 0x2, 0x2, 0x2)\n        \/Users\/slohia\/go\/src\/github.com\/golang-examples\/articles\/tutorial\/panicRecover\/goroutine\/main.go:19 +0xe2\ncreated by main.checkAndPrintWithRecover\n        \/Users\/slohia\/go\/src\/github.com\/golang-examples\/articles\/tutorial\/panicRecover\/goroutine\/main.go:14 +0x82\nexit status 2<\/code><\/pre>\n\n\n\n<p>In the above program we have <strong>checkAndPrint<\/strong> in the goroutine\u00a0and it raises\u00a0<strong>panic<\/strong> in that goroutine.\u00a0 The <strong>recover<\/strong> function is in the calling goroutine. As you can see from the output that it does not stop <strong>panic<\/strong> and hence\u00a0you see the a<\/p>\n","protected":false},"excerpt":{"rendered":"<p>Table of Contents OverviewRecover function in the same goroutine as panicRecover function in a different goroutine as panic Overview There are two cases for recovering from a panic in a goroutine recover&#8230;<\/p>\n","protected":false},"author":1,"featured_media":0,"comment_status":"open","ping_status":"open","sticky":false,"template":"","format":"standard","meta":{"spay_email":"","footnotes":"","jetpack_publicize_message":"","jetpack_is_tweetstorm":false},"categories":[1],"tags":[3,4],"class_list":["post-3998","post","type-post","status-publish","format-standard","hentry","category-tech","tag-go","tag-golang"],"yoast_head":"<!-- This site is optimized with the Yoast SEO plugin v22.7 - https:\/\/yoast.com\/wordpress\/plugins\/seo\/ -->\n<title>Recover panic from goroutine in Go (Golang) - Welcome To Golang By Example<\/title>\n<meta name=\"robots\" content=\"index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1\" \/>\n<link rel=\"canonical\" href=\"https:\/\/golangbyexamples.com\/recover-panic-goroutine-go\/\" \/>\n<meta property=\"og:locale\" content=\"en_US\" \/>\n<meta property=\"og:type\" content=\"article\" \/>\n<meta property=\"og:title\" content=\"Recover panic from goroutine in Go (Golang) - Welcome To Golang By Example\" \/>\n<meta property=\"og:description\" content=\"Table of Contents OverviewRecover function in the same goroutine as panicRecover function in a different goroutine as panic Overview There are two cases for recovering from a panic in a goroutine recover...\" \/>\n<meta property=\"og:url\" content=\"https:\/\/golangbyexamples.com\/recover-panic-goroutine-go\/\" \/>\n<meta property=\"og:site_name\" content=\"Welcome To Golang By Example\" \/>\n<meta property=\"article:published_time\" content=\"2020-09-20T17:26:34+00:00\" \/>\n<meta property=\"article:modified_time\" content=\"2020-09-20T17:26:46+00:00\" \/>\n<meta name=\"author\" content=\"admin\" \/>\n<meta name=\"twitter:card\" content=\"summary_large_image\" \/>\n<meta name=\"twitter:label1\" content=\"Written by\" \/>\n\t<meta name=\"twitter:data1\" content=\"admin\" \/>\n\t<meta name=\"twitter:label2\" content=\"Est. reading time\" \/>\n\t<meta name=\"twitter:data2\" content=\"2 minutes\" \/>\n<script type=\"application\/ld+json\" class=\"yoast-schema-graph\">{\"@context\":\"https:\/\/schema.org\",\"@graph\":[{\"@type\":\"WebPage\",\"@id\":\"https:\/\/golangbyexamples.com\/recover-panic-goroutine-go\/\",\"url\":\"https:\/\/golangbyexamples.com\/recover-panic-goroutine-go\/\",\"name\":\"Recover panic from goroutine in Go (Golang) - Welcome To Golang By Example\",\"isPartOf\":{\"@id\":\"https:\/\/golangbyexamples.com\/#website\"},\"datePublished\":\"2020-09-20T17:26:34+00:00\",\"dateModified\":\"2020-09-20T17:26:46+00:00\",\"author\":{\"@id\":\"https:\/\/golangbyexamples.com\/#\/schema\/person\/8833ea7638dafd763cb1db6c0ca4576f\"},\"breadcrumb\":{\"@id\":\"https:\/\/golangbyexamples.com\/recover-panic-goroutine-go\/#breadcrumb\"},\"inLanguage\":\"en-US\",\"potentialAction\":[{\"@type\":\"ReadAction\",\"target\":[\"https:\/\/golangbyexamples.com\/recover-panic-goroutine-go\/\"]}]},{\"@type\":\"BreadcrumbList\",\"@id\":\"https:\/\/golangbyexamples.com\/recover-panic-goroutine-go\/#breadcrumb\",\"itemListElement\":[{\"@type\":\"ListItem\",\"position\":1,\"name\":\"Home\",\"item\":\"https:\/\/golangbyexamples.com\/\"},{\"@type\":\"ListItem\",\"position\":2,\"name\":\"Recover panic from goroutine in Go (Golang)\"}]},{\"@type\":\"WebSite\",\"@id\":\"https:\/\/golangbyexamples.com\/#website\",\"url\":\"https:\/\/golangbyexamples.com\/\",\"name\":\"Welcome To Golang By Example\",\"description\":\"\",\"potentialAction\":[{\"@type\":\"SearchAction\",\"target\":{\"@type\":\"EntryPoint\",\"urlTemplate\":\"https:\/\/golangbyexamples.com\/?s={search_term_string}\"},\"query-input\":\"required name=search_term_string\"}],\"inLanguage\":\"en-US\"},{\"@type\":\"Person\",\"@id\":\"https:\/\/golangbyexamples.com\/#\/schema\/person\/8833ea7638dafd763cb1db6c0ca4576f\",\"name\":\"admin\",\"image\":{\"@type\":\"ImageObject\",\"inLanguage\":\"en-US\",\"@id\":\"https:\/\/golangbyexamples.com\/#\/schema\/person\/image\/\",\"url\":\"https:\/\/secure.gravatar.com\/avatar\/?s=96&d=mm&r=g\",\"contentUrl\":\"https:\/\/secure.gravatar.com\/avatar\/?s=96&d=mm&r=g\",\"caption\":\"admin\"},\"url\":\"https:\/\/golangbyexamples.com\/author\/admin\/\"}]}<\/script>\n<!-- \/ Yoast SEO plugin. -->","yoast_head_json":{"title":"Recover panic from goroutine in Go (Golang) - Welcome To Golang By Example","robots":{"index":"index","follow":"follow","max-snippet":"max-snippet:-1","max-image-preview":"max-image-preview:large","max-video-preview":"max-video-preview:-1"},"canonical":"https:\/\/golangbyexamples.com\/recover-panic-goroutine-go\/","og_locale":"en_US","og_type":"article","og_title":"Recover panic from goroutine in Go (Golang) - Welcome To Golang By Example","og_description":"Table of Contents OverviewRecover function in the same goroutine as panicRecover function in a different goroutine as panic Overview There are two cases for recovering from a panic in a goroutine recover...","og_url":"https:\/\/golangbyexamples.com\/recover-panic-goroutine-go\/","og_site_name":"Welcome To Golang By Example","article_published_time":"2020-09-20T17:26:34+00:00","article_modified_time":"2020-09-20T17:26:46+00:00","author":"admin","twitter_card":"summary_large_image","twitter_misc":{"Written by":"admin","Est. reading time":"2 minutes"},"schema":{"@context":"https:\/\/schema.org","@graph":[{"@type":"WebPage","@id":"https:\/\/golangbyexamples.com\/recover-panic-goroutine-go\/","url":"https:\/\/golangbyexamples.com\/recover-panic-goroutine-go\/","name":"Recover panic from goroutine in Go (Golang) - Welcome To Golang By Example","isPartOf":{"@id":"https:\/\/golangbyexamples.com\/#website"},"datePublished":"2020-09-20T17:26:34+00:00","dateModified":"2020-09-20T17:26:46+00:00","author":{"@id":"https:\/\/golangbyexamples.com\/#\/schema\/person\/8833ea7638dafd763cb1db6c0ca4576f"},"breadcrumb":{"@id":"https:\/\/golangbyexamples.com\/recover-panic-goroutine-go\/#breadcrumb"},"inLanguage":"en-US","potentialAction":[{"@type":"ReadAction","target":["https:\/\/golangbyexamples.com\/recover-panic-goroutine-go\/"]}]},{"@type":"BreadcrumbList","@id":"https:\/\/golangbyexamples.com\/recover-panic-goroutine-go\/#breadcrumb","itemListElement":[{"@type":"ListItem","position":1,"name":"Home","item":"https:\/\/golangbyexamples.com\/"},{"@type":"ListItem","position":2,"name":"Recover panic from goroutine in Go (Golang)"}]},{"@type":"WebSite","@id":"https:\/\/golangbyexamples.com\/#website","url":"https:\/\/golangbyexamples.com\/","name":"Welcome To Golang By Example","description":"","potentialAction":[{"@type":"SearchAction","target":{"@type":"EntryPoint","urlTemplate":"https:\/\/golangbyexamples.com\/?s={search_term_string}"},"query-input":"required name=search_term_string"}],"inLanguage":"en-US"},{"@type":"Person","@id":"https:\/\/golangbyexamples.com\/#\/schema\/person\/8833ea7638dafd763cb1db6c0ca4576f","name":"admin","image":{"@type":"ImageObject","inLanguage":"en-US","@id":"https:\/\/golangbyexamples.com\/#\/schema\/person\/image\/","url":"https:\/\/secure.gravatar.com\/avatar\/?s=96&d=mm&r=g","contentUrl":"https:\/\/secure.gravatar.com\/avatar\/?s=96&d=mm&r=g","caption":"admin"},"url":"https:\/\/golangbyexamples.com\/author\/admin\/"}]}},"jetpack_featured_media_url":"","jetpack_publicize_connections":[],"jetpack_sharing_enabled":true,"jetpack_shortlink":"https:\/\/wp.me\/paOs1b-12u","amp_validity":null,"amp_enabled":true,"_links":{"self":[{"href":"https:\/\/golangbyexamples.com\/wp-json\/wp\/v2\/posts\/3998","targetHints":{"allow":["GET"]}}],"collection":[{"href":"https:\/\/golangbyexamples.com\/wp-json\/wp\/v2\/posts"}],"about":[{"href":"https:\/\/golangbyexamples.com\/wp-json\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"https:\/\/golangbyexamples.com\/wp-json\/wp\/v2\/users\/1"}],"replies":[{"embeddable":true,"href":"https:\/\/golangbyexamples.com\/wp-json\/wp\/v2\/comments?post=3998"}],"version-history":[{"count":3,"href":"https:\/\/golangbyexamples.com\/wp-json\/wp\/v2\/posts\/3998\/revisions"}],"predecessor-version":[{"id":4001,"href":"https:\/\/golangbyexamples.com\/wp-json\/wp\/v2\/posts\/3998\/revisions\/4001"}],"wp:attachment":[{"href":"https:\/\/golangbyexamples.com\/wp-json\/wp\/v2\/media?parent=3998"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"https:\/\/golangbyexamples.com\/wp-json\/wp\/v2\/categories?post=3998"},{"taxonomy":"post_tag","embeddable":true,"href":"https:\/\/golangbyexamples.com\/wp-json\/wp\/v2\/tags?post=3998"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}
<?xml version="1.0" encoding="UTF-8"?><rss version="2.0"
	xmlns:content="http://purl.org/rss/1.0/modules/content/"
	xmlns:wfw="http://wellformedweb.org/CommentAPI/"
	xmlns:dc="http://purl.org/dc/elements/1.1/"
	xmlns:atom="http://www.w3.org/2005/Atom"
	xmlns:sy="http://purl.org/rss/1.0/modules/syndication/"
	xmlns:slash="http://purl.org/rss/1.0/modules/slash/"
	
	xmlns:georss="http://www.georss.org/georss"
	xmlns:geo="http://www.w3.org/2003/01/geo/wgs84_pos#"
	>

<channel>
	<title>flyweight design pattern Archives - Welcome To Golang By Example</title>
	<atom:link href="https://golangbyexamples.com/tag/flyweight-design-pattern/feed/" rel="self" type="application/rss+xml" />
	<link>https://golangbyexamples.com/tag/flyweight-design-pattern/</link>
	<description></description>
	<lastBuildDate>Tue, 08 Sep 2020 21:00:15 +0000</lastBuildDate>
	<language>en-US</language>
	<sy:updatePeriod>
	hourly	</sy:updatePeriod>
	<sy:updateFrequency>
	1	</sy:updateFrequency>
	<generator>https://wordpress.org/?v=6.8.1</generator>

<image>
	<url>https://i0.wp.com/golangbyexamples.com/wp-content/uploads/2021/05/cropped-go_border-1.png?fit=32%2C32&#038;ssl=1</url>
	<title>flyweight design pattern Archives - Welcome To Golang By Example</title>
	<link>https://golangbyexamples.com/tag/flyweight-design-pattern/</link>
	<width>32</width>
	<height>32</height>
</image> 
<site xmlns="com-wordpress:feed-additions:1">159787465</site>	<item>
		<title>Flyweight Design Pattern in Go (Golang)</title>
		<link>https://golangbyexamples.com/flyweight-design-pattern-golang/</link>
					<comments>https://golangbyexamples.com/flyweight-design-pattern-golang/#comments</comments>
		
		<dc:creator><![CDATA[admin]]></dc:creator>
		<pubDate>Sat, 09 Nov 2019 08:58:12 +0000</pubDate>
				<category><![CDATA[Tech]]></category>
		<category><![CDATA[design pattern]]></category>
		<category><![CDATA[flyweight design pattern]]></category>
		<category><![CDATA[go]]></category>
		<guid isPermaLink="false">https://golangbyexamples.com/?p=361</guid>

					<description><![CDATA[<p>Note: Interested in understanding how all other design patterns can be implemented in GO. Please see this full reference &#8211; All Design Patterns in Go (Golang) Definition:&#160; It is a structural design...</p>
<p>The post <a href="https://golangbyexamples.com/flyweight-design-pattern-golang/">Flyweight Design Pattern in Go (Golang)</a> appeared first on <a href="https://golangbyexamples.com">Welcome To Golang By Example</a>.</p>
]]></description>
										<content:encoded><![CDATA[
<p class="has-medium-font-size">Note: Interested in understanding how all other design patterns can be implemented in GO. Please see this full reference  &#8211; <a href="https://golangbyexamples.com/all-design-patterns-golang/">All Design Patterns in Go (Golang)</a></p>



<h2 class="has-text-align-left wp-block-heading"><strong>Definition:&nbsp; </strong></h2>



<p class="has-medium-font-size">It is a structural design pattern. This pattern is used when a large number of similar objects need to be created. These objects are called flyweight objects and are immutable. </p>



<p class="has-medium-font-size">Let&#8217;s first see an example. Flyweight Pattern will be clear after this example.</p>



<p class="has-medium-font-size">In a game of Counter-Strike, Terrorist and Counter-Terrorist have a different type of dress. For simplicity, let&#8217;s assume that both Terrorist and Counter-Terrorists have one dress type each. The dress object is embedded in the player object as below</p>



<p class="has-medium-font-size">Below is the struct for a player, we can see the dress object is embedded in player struct</p>



<pre class="wp-block-prismatic-blocks"><code class="language-go">type player struct {
    dress      dress
    playerType string //Can be T or CT
    lat        int
    long       int
}</code></pre>



<p class="has-medium-font-size">Let&#8217;s say there are 5 Terrorists and 5 Counter-Terrorist, so a total of 10 players. Now there are two options with respect to dress</p>



<ol class="has-medium-font-size wp-block-list"><li> Each of the 10 player objects creates a different dress object and embed them. Total 10 dress objects will be created</li><li>We create two dress object<ul><li>Single Terrorist Dress Object: This will be shared across 5 Terrorist</li><li>Single Counter-Terrorist Dress Object: This will be shared across 5 Counter-Terrorist</li></ul></li></ol>



<p class="has-text-color has-medium-font-size" style="color:#000000">As you can that in Approach 1, total of 10 dress objects are created while in approach 2 only 2 dress objects are created. The second approach is what we follow in the Flyweight design pattern. The two dress objects which we created are called the flyweight objects. Flyweight pattern takes out the common parts and creates flyweight objects. These flyweight objects (dress here)&nbsp; can then be shared among multiple objects (player here). This drastically reduces the number of dress objects and the good part is that even if you create more players, still only two dress objects will be sufficient. </p>



<p class="has-medium-font-size">In the flyweight pattern, we store the flyweight objects in the map.&nbsp; Whenever the other objects which share the flyweight objects are created, then flyweight objects are fetched from the map.</p>



<p class="has-medium-font-size"><strong>Intrinsic and Extrinsic States</strong></p>



<ul class="has-medium-font-size wp-block-list"><li><strong>Intrinsic State &#8211;</strong>Dress in the intrinsic state as it can be shared across multiple Terrorist and Counter-Terrorist Objects</li><li><strong>Extrinsic State &#8211; </strong>Player location and the player weapon is an extrinsic state as it is different for every object.</li></ul>



<h2 class="wp-block-heading"><strong>When to Use</strong>:</h2>



<ul class="has-medium-font-size wp-block-list"><li>When the objects have some intrinsic properties which can be shared. <ul><li> As in the above example, dress is the intrinsic property that was taken out and shared.</li></ul></li><li>Use flyweight when a large number of objects needs to be created which can cause memory issue. In case figure out all the common or intrinsic state and create flyweight objects for that.     </li></ul>



<h2 class="wp-block-heading"><strong>UML Diagram</strong>:</h2>



<figure class="wp-block-image"><img fetchpriority="high" decoding="async" width="591" height="503" src="https://i2.wp.com/golangbyexamples.com/wp-content/uploads/2019/11/Flyweight-Design-Pattern-1-1.jpg?resize=591%2C503&#038;ssl=1" alt="" class="wp-image-377" srcset="https://i1.wp.com/golangbyexamples.com/wp-content/uploads/2019/11/Flyweight-Design-Pattern-1-1.jpg?w=591&amp;ssl=1 591w, https://i1.wp.com/golangbyexamples.com/wp-content/uploads/2019/11/Flyweight-Design-Pattern-1-1.jpg?resize=300%2C255&amp;ssl=1 300w" sizes="(max-width: 591px) 100vw, 591px" data-recalc-dims="1" /></figure>



<p>Below is the corresponding mapping UML diagram with the example given above</p>



<p></p>



<figure class="wp-block-image"><img decoding="async" width="541" height="503" src="https://i1.wp.com/golangbyexamples.com/wp-content/uploads/2019/11/Flyweight-Design-Pattern-2-1.png?resize=541%2C503&#038;ssl=1" alt="" class="wp-image-378" srcset="https://i0.wp.com/golangbyexamples.com/wp-content/uploads/2019/11/Flyweight-Design-Pattern-2-1.png?w=541&amp;ssl=1 541w, https://i0.wp.com/golangbyexamples.com/wp-content/uploads/2019/11/Flyweight-Design-Pattern-2-1.png?resize=300%2C279&amp;ssl=1 300w" sizes="(max-width: 541px) 100vw, 541px" data-recalc-dims="1" /></figure>



<h2 class="wp-block-heading"><strong>Mapping:</strong></h2>



<p class="has-medium-font-size">The below table represents the mapping from the UML diagram actors to actual implementation actors in code.</p>



<figure class="wp-block-table is-style-stripes"><table class="has-subtle-pale-blue-background-color has-fixed-layout has-background"><tbody><tr><td>Flyweight Factory</td><td>dressFactory.go</td></tr><tr><td>Flyweight Interface</td><td>dress.go</td></tr><tr><td>Concrete Flyweight Object 1</td><td>terroristDress.go</td></tr><tr><td>Concrete Flyweight Object 1</td><td>counterTerroristDress.go</td></tr><tr><td>Context</td><td>player.go</td></tr><tr><td>Client</td><td>main.go</td></tr></tbody></table></figure>



<h2 class="wp-block-heading"><strong>Practical Example</strong>:</h2>



<p class="has-medium-font-size"><strong>dressFactory.go</strong></p>



<pre class="wp-block-prismatic-blocks"><code class="language-go">package main

import "fmt"

const (
    //TerroristDressType terrorist dress type
    TerroristDressType = "tDress"
    //CounterTerrroristDressType terrorist dress type
    CounterTerrroristDressType = "ctDress"
)

var (
    dressFactorySingleInstance = &dressFactory{
        dressMap: make(map[string]dress),
    }
)

type dressFactory struct {
    dressMap map[string]dress
}

func (d *dressFactory) getDressByType(dressType string) (dress, error) {
    if d.dressMap[dressType] != nil {
        return d.dressMap[dressType], nil
    }
    if dressType == TerroristDressType {
        d.dressMap[dressType] = newTerroristDress()
        return d.dressMap[dressType], nil
    }
    if dressType == CounterTerrroristDressType {
        d.dressMap[dressType] = newCounterTerroristDress()
        return d.dressMap[dressType], nil
    }
    return nil, fmt.Errorf("Wrong dress type passed")
}

func getDressFactorySingleInstance() *dressFactory {
    return dressFactorySingleInstance
}</code></pre>



<p class="has-medium-font-size"><strong>dress.go</strong></p>



<pre class="wp-block-prismatic-blocks"><code class="language-go">package main

type dress interface {
    getColor() string
}</code></pre>



<p class="has-medium-font-size"><strong>terroristDress.go</strong></p>



<pre class="wp-block-prismatic-blocks"><code class="language-go">package main

type terroristDress struct {
	color string
}

func (t *terroristDress) getColor() string {
	return t.color
}

func newTerroristDress() *terroristDress {
	return &terroristDress{color: "red"}
}
</code></pre>



<p class="has-medium-font-size"><strong>counterTerroristDress.go</strong></p>



<pre class="wp-block-prismatic-blocks"><code class="language-go">package main

type counterTerroristDress struct {
    color string
}

func (c *counterTerroristDress) getColor() string {
    return c.color
}

func newCounterTerroristDress() *counterTerroristDress {
    return &counterTerroristDress{color: "green"}
}</code></pre>



<p class="has-medium-font-size"><strong>player.go</strong></p>



<pre class="wp-block-prismatic-blocks"><code class="language-go">package main

type player struct {
    dress      dress
    playerType string
    lat        int
    long       int
}

func newPlayer(playerType, dressType string) *player {
    dress, _ := getDressFactorySingleInstance().getDressByType(dressType)
    return &player{
        playerType: playerType,
        dress:      dress,
    }
}

func (p *player) newLocation(lat, long int) {
    p.lat = lat
    p.long = long
}</code></pre>



<p class="has-medium-font-size"><strong>main.go</strong></p>



<pre class="wp-block-prismatic-blocks"><code class="language-go">package main

import "fmt"

func main() {
    game := newGame()
    //Add Terrorist
    game.addTerrorist(TerroristDressType)
    game.addTerrorist(TerroristDressType)
    game.addTerrorist(TerroristDressType)
    game.addTerrorist(TerroristDressType)
    //Add CounterTerrorist
    game.addCounterTerrorist(CounterTerrroristDressType)
    game.addCounterTerrorist(CounterTerrroristDressType)
    game.addCounterTerrorist(CounterTerrroristDressType)
    dressFactoryInstance := getDressFactorySingleInstance()
    for dressType, dress := range dressFactoryInstance.dressMap {
        fmt.Printf("DressColorType: %s\nDressColor: %s\n", dressType, dress.getColor())
    }
}</code></pre>



<p class="has-medium-font-size"><strong>Output:</strong></p>



<pre class="wp-block-prismatic-blocks"><code class="language-go">DressColorType: ctDress
DressColor: green
DressColorType: tDress
DressColor: red</code></pre>
<p>The post <a href="https://golangbyexamples.com/flyweight-design-pattern-golang/">Flyweight Design Pattern in Go (Golang)</a> appeared first on <a href="https://golangbyexamples.com">Welcome To Golang By Example</a>.</p>
]]></content:encoded>
					
					<wfw:commentRss>https://golangbyexamples.com/flyweight-design-pattern-golang/feed/</wfw:commentRss>
			<slash:comments>2</slash:comments>
		
		
		<post-id xmlns="com-wordpress:feed-additions:1">361</post-id>	</item>
	</channel>
</rss>
